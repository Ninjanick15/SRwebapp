!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";var t={fuse_blocked_url:[],fuse_breakpoints:{m:1024,s:768,xs:0},fuse_cdn:"//cdn.fuseplatform.net/publift/tags/",fuse_id:1007,fuse_industry:["IAB19"],fuse_settings:{adblock:!1,amazonUam:{enabled:!1},blockthrough:!0,cmp:!1,confiant:!1,disableAutoLoadSlots:!1,disable_quantcast:!1,enableMiniScrollers:!1,headerbidding:0,identity:{enabled:!1},inskinWidth:1200,lazy:!1,prebid:{breakpoint_options:{},defaultTimeout:1e3,enabled:!1,sendAllBids:!1},quickstart:!1,responsive:!0,strict_cmp:!1,useDomObserver:!1,publication_metadata:{publication_id:5,generation_version:"4.2000.0",generation_time:"2022-02-23T03:08:06.822Z",revision:"v2"}},fuse_slots:[{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21764347423",sizeMapping:{m:[],s:[],xs:[[300,50],[300,100],[320,50],[320,100]]},sizes:[[300,50],[300,100],[320,50],[320,100]],slot:"/71161633,11757429/ENV_envato/mob_tutorial_1"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:1,s:1,xl:!1,xs:1},id:"21764347426",sizeMapping:{m:[[300,250],[336,280],[728,90],"fluid"],s:[[300,250],[336,280],[468,60],[728,90],"fluid"],xs:[]},sizes:[[300,250],[336,280],[468,60],[728,90],["fluid"]],slot:"/71161633,11757429/ENV_envato/article_mid_1"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21764354922",sizeMapping:{m:[[120,600],[160,600],[300,250],[300,600],"fluid"],s:[[300,250],[468,60],[728,90],"fluid"],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],"fluid"]},sizes:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[468,60],[728,90],["fluid"]],slot:"/71161633,11757429/ENV_envato/tutorial_rhs_2"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21764354925",sizeMapping:{m:[],s:[],xs:[[300,250],[320,50],[320,100],"fluid"]},sizes:[[300,250],[320,50],[320,100],["fluid"]],slot:"/71161633,11757429/ENV_envato/mob_tutorial_4"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:1,s:1,xl:!1,xs:1},id:"21764354928",sizeMapping:{m:[[300,250],[336,280],[728,90],"fluid"],s:[[300,250],[336,280],[468,60],[728,90],"fluid"],xs:[]},sizes:[[300,250],[336,280],[468,60],[728,90],["fluid"]],slot:"/71161633,11757429/ENV_envato/article_mid_2"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21764354931",sizeMapping:{m:[],s:[],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],"fluid"]},sizes:[[300,50],[300,100],[300,250],[320,50],[320,100],["fluid"]],slot:"/71161633,11757429/ENV_envato/mob_article_3"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21764355504",sizeMapping:{m:[[728,90],[970,90],[970,250]],s:[[468,60],[728,90]],xs:[]},sizes:[[468,60],[728,90],[970,90],[970,250]],slot:"/71161633,11757429/ENV_envato/tutorial_top"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21764355507",sizeMapping:{m:[[120,600],[160,600],[300,250],[300,600],"fluid"],s:[[300,250],[468,60],[728,90],"fluid"],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],"fluid"]},sizes:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[468,60],[728,90],["fluid"]],slot:"/71161633,11757429/ENV_envato/tutorial_rhs_1"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21764355510",sizeMapping:{m:[[728,90],[970,90],[970,250],"fluid"],s:[[728,90],"fluid"],xs:[[300,250],[320,50],[320,100]]},sizes:[[300,250],[320,50],[320,100],[728,90],[970,90],[970,250],["fluid"]],slot:"/71161633,11757429/ENV_envato/tutorial_bottom"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21764355513",sizeMapping:{m:[],s:[],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],"fluid"]},sizes:[[300,50],[300,100],[300,250],[320,50],[320,100],["fluid"]],slot:"/71161633,11757429/ENV_envato/mob_tutorial_2"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21764355516",sizeMapping:{m:[],s:[],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],"fluid"]},sizes:[[300,50],[300,100],[300,250],[320,50],[320,100],["fluid"]],slot:"/71161633,11757429/ENV_envato/mob_tutorial_3"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21764355519",sizeMapping:{m:[[728,90],[970,90],[970,250]],s:[[468,60],[728,90]],xs:[]},sizes:[[468,60],[728,90],[970,90],[970,250]],slot:"/71161633,11757429/ENV_envato/article_top"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:1,s:1,xl:!1,xs:1},id:"21764355522",sizeMapping:{m:[[120,600],[160,600],[300,250],[300,600],"fluid"],s:[[300,250],"fluid"],xs:[]},sizes:[[120,600],[160,600],[300,250],[300,600],["fluid"]],slot:"/71161633,11757429/ENV_envato/article_rhs_1"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:25},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21764355525",sizeMapping:{m:[[120,600],[160,600],[300,250],[300,600],"fluid"],s:[[300,250],"fluid"],xs:[]},sizes:[[120,600],[160,600],[300,250],[300,600],["fluid"]],slot:"/71161633,11757429/ENV_envato/article_rhs_2"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21764355528",sizeMapping:{m:[[120,600],[160,600],[300,250],[300,600],"fluid"],s:[[300,250],[336,280],[468,60],[728,90],"fluid"],xs:[]},sizes:[[120,600],[160,600],[300,250],[300,600],[336,280],[468,60],[728,90],["fluid"]],slot:"/71161633,11757429/ENV_envato/article_rhs_3"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21764355531",sizeMapping:{m:[[728,90],[970,90],[970,250]],s:[[728,90]],xs:[]},sizes:[[728,90],[970,90],[970,250]],slot:"/71161633,11757429/ENV_envato/article_bottom"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21764355534",sizeMapping:{m:[],s:[],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],"fluid"]},sizes:[[300,50],[300,100],[300,250],[320,50],[320,100],["fluid"]],slot:"/71161633,11757429/ENV_envato/mob_article_1"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21764355537",sizeMapping:{m:[],s:[],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],"fluid"]},sizes:[[300,50],[300,100],[300,250],[320,50],[320,100],["fluid"]],slot:"/71161633,11757429/ENV_envato/mob_article_2"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21764355540",sizeMapping:{m:[],s:[],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],"fluid"]},sizes:[[300,50],[300,100],[300,250],[320,50],[320,100],["fluid"]],slot:"/71161633,11757429/ENV_envato/mob_article_4"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21883893312",sizeMapping:{m:[],s:[],xs:[[320,50]]},sizes:[[320,50]],slot:"/71161633,11757429/ENV_envato/mobile_sticky_footer"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21884282942",sizeMapping:{m:[[300,250],[728,90],"fluid"],s:[[300,250],[728,90],"fluid"],xs:[]},sizes:[[300,250],[728,90],["fluid"]],slot:"/71161633,11757429/ENV_envato/article_mid_3"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},id:"21884282945",sizeMapping:{m:[[300,250],[728,90]],s:[[300,250],[728,90]],xs:[]},sizes:[[300,250],[728,90]],slot:"/71161633,11757429/ENV_envato/article_mid_4"},{attributes:{adblock:!1,headerbidding:!1,lazy:!1,refresh:!1},bids:[],id:"22018374233",sizeMapping:{m:[],s:[],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],"fluid"]},sizes:[[300,50],[300,100],[300,250],[320,50],[320,100],["fluid"]],slot:"/71161633,11757429/ENV_envato/mob_article_top"},{attributes:{adblock:!1,dynamic:!1,headerbidding:!1,interscroller:!1,interstitial:!1,lazy:!1,refresh:30,sticky:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},id:"22650370808",insertCondition:{},interscrollerAttributes:{showBanner:!1,zIndex:0},sizeMapping:{l:[],m:[[728,90]],s:[[728,90]],xl:[],xs:[]},sizes:[[728,90]],slot:"/71161633,11757429/ENV_envato/sticky_footer",stickyAttributes:{allowClose:!0,bgOpacity:.5,buttonColor:"#000000",compact:!1}},{attributes:{adblock:!1,dynamic:!1,headerbidding:!1,interscroller:!1,interstitial:!1,lazy:!1,refresh:!1,sticky:!1},bids:[],id:"22654033503",sizeMapping:{m:[[300,250],[728,90],[970,250],"fluid"],s:[[300,250],[728,90],"fluid"],xs:[]},sizes:[[300,250],[728,90],[970,250],["fluid"]],slot:"/71161633,11757429/ENV_envato/article_wide_5"},{attributes:{adblock:!1,dynamic:!1,headerbidding:!1,interscroller:!1,interstitial:!1,lazy:!1,refresh:!1,sticky:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},id:"22654128031",insertCondition:{},interscrollerAttributes:{showBanner:!1,zIndex:0},sizeMapping:{m:[[300,250],[728,90],[970,250],"fluid"],s:[[300,250],[728,90],"fluid"],xs:[]},sizes:[[300,250],[728,90],[970,250],["fluid"]],slot:"/71161633,11757429/ENV_envato/article_wide_1",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!1}},{attributes:{adblock:!1,dynamic:!1,headerbidding:!1,interscroller:!1,interstitial:!1,lazy:!1,refresh:!1,sticky:!1},bids:[],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},id:"22654128034",insertCondition:{},interscrollerAttributes:{showBanner:!1,zIndex:0},sizeMapping:{m:[[300,250],[728,90],[970,250],"fluid"],s:[[300,250],[728,90],"fluid"],xs:[]},sizes:[[300,250],[728,90],[970,250],["fluid"]],slot:"/71161633,11757429/ENV_envato/article_wide_2",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!1}},{attributes:{adblock:!1,dynamic:!1,headerbidding:!1,interscroller:!1,interstitial:!1,lazy:!1,refresh:!1,sticky:!1},bids:[],id:"22654128037",sizeMapping:{m:[[300,250],[728,90],[970,250],"fluid"],s:[[300,250],[728,90],"fluid"],xs:[]},sizes:[[300,250],[728,90],[970,250],["fluid"]],slot:"/71161633,11757429/ENV_envato/article_wide_4"},{attributes:{adblock:!1,dynamic:!1,headerbidding:!1,interscroller:!1,interstitial:!1,lazy:!1,refresh:!1,sticky:!1},bids:[],id:"22654128040",sizeMapping:{m:[[300,250],[728,90],[970,250],"fluid"],s:[[300,250],[728,90],"fluid"],xs:[]},sizes:[[300,250],[728,90],[970,250],["fluid"]],slot:"/71161633,11757429/ENV_envato/article_wide_3"},{attributes:{adblock:!1,dynamic:!1,headerbidding:!1,interscroller:!1,interstitial:!1,lazy:!1,miniscroller:!1,refresh:!1,sticky:!1},bids:[],id:"22686840638",sizeMapping:{m:[],s:[],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],"fluid"]},sizes:[[300,50],[300,100],[300,250],[320,50],[320,100],["fluid"]],slot:"/71161633,11757429/ENV_envato/mob_article_6"},{attributes:{adblock:!1,dynamic:!1,headerbidding:!1,interscroller:!1,interstitial:!1,lazy:!1,miniscroller:!1,refresh:!1,sticky:!1},bids:[],id:"22686840641",sizeMapping:{m:[[300,250],[728,90],[970,250],"fluid"],s:[[300,250],[728,90],"fluid"],xs:[]},sizes:[[300,250],[728,90],[970,250],["fluid"]],slot:"/71161633,11757429/ENV_envato/article_wide_6"},{attributes:{adblock:!1,dynamic:!1,headerbidding:!1,interscroller:!1,interstitial:!1,lazy:!1,miniscroller:!1,refresh:!1,sticky:!1},bids:[],id:"22686840644",sizeMapping:{m:[],s:[],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],"fluid"]},sizes:[[300,50],[300,100],[300,250],[320,50],[320,100],["fluid"]],slot:"/71161633,11757429/ENV_envato/mob_article_5"}],fuse_tenant:"publift",fuse_uuid:"1d980a7b-cb60-5b1f-b7d5-e36d1c5efeaa",sco:{asi:"publift.com",sellerId:"01DS4VZW7FG7D70A22JJFF8E71"},supported_sizes:{l:[],m:[[120,600],[160,600],[300,250],[300,600],[336,280],[728,90],[970,90],[970,250],"fluid"],s:[[160,600],[300,250],[336,280],[468,60],[728,90],"fluid"],xl:[],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],"fluid"]},tenantId:"DGKSPXNV53"};function e(n){const e=["business.tutsplus.com"],i=["xl","l","m"];Bt.disableWidgetsRenderer=!0;if((()=>{const t=Ft.getCurrentBreakpoint().name;return 0<e.filter(e=>e===n.location.hostname).length&&0<i.filter(e=>e===t).length})()){let e=!1;document.addEventListener("scroll",()=>{!e&&n.scrollY>.9*n.innerHeight&&(console.log("render widgets"),e=!0,Ft.widgetsRenderer.render(Mt),Ft.processNewSlots())})}}function i(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){c(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return r}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var f=this;Array.prototype.forEach||(Array.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<f.length;n++)e.call(t,f[n],n,f)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0==i)return!1;for(var o,r,t=0|t,s=Math.max(0<=t?t:i-Math.abs(t),0);s<i;){if((o=n[s])===(r=e)||"number"==typeof o&&"number"==typeof r&&isNaN(o)&&isNaN(r))return!0;s++}return!1}}),"undefined"!=typeof window&&window.NodeList&&!window.NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var p=function(){function t(e){o(this,t),this.pubID=e.pubID,this.adServer=e.adServer,this.logger=e.logger,this.browserWindow=e.browserWindow,this.gdpr={},this.params={},this.sco=e.sco||{}}return n(t,[{key:"loadAmazonUam",value:function(n,i,e,t,o,r,s){function a(e,t){i[n]._Q.push([e,t])}i[n]||(i[n]={init:function(){a("i",arguments)},fetchBids:function(){a("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(r=e.createElement(t)).async=!0,r.src=o,(s=e.getElementsByTagName(t)[0]).parentNode.insertBefore(r,s))}},{key:"applyCCPA",value:function(e){this.params={us_privacy:e},this.logger.log("[CONSENT]: CCPA config passed onto UAM")}},{key:"applyGDPR",value:function(){this.gdpr={cmpTimeout:1e4},this.logger.log("[CONSENT]: GDPR config passed onto UAM")}},{key:"getUamConfig",value:function(){var e={pubID:this.pubID,adServer:this.adServer};return Object.getOwnPropertyNames(this.gdpr).length&&(e.gdpr=this.gdpr),Object.getOwnPropertyNames(this.params).length&&(e.params=this.params),Object.getOwnPropertyNames(this.sco).length&&(e.schain={ver:"1.0",complete:1,nodes:[{asi:this.sco.asi,sid:this.sco.sellerId,hp:1}]}),e}},{key:"load",value:function(){if(this.loadAmazonUam("apstag",this.browserWindow,this.browserWindow.document,"script","//c.amazon-adsystem.com/aax2/apstag.js"),!this.browserWindow.apstag)return this.logger.error("[LOAD]: 0. UAM script loading failed.")}},{key:"init",value:function(e){this.browserWindow.apstag.init(this.getUamConfig()),this.logger.log("[LOAD]: 0. UAM script loaded"),this.logger.log("[TIME]: time in ms it took UAM script to load",new Date-e)}},{key:"makeBids",value:function(e,t){var n=this;this.browserWindow.apstag.fetchBids({slots:e},function(e){n.browserWindow.googletag.cmd.push(function(){n.browserWindow.apstag.setDisplayBids(),t(e)})})}}]),t}(),b=function(){function t(e){o(this,t),this.browserWindow=e.browserWindow,this.versionLoader=e.versionLoader,this.logger=e.logger,this.versionNumber=1,this.version=null,this.gdprApplies=!1,this.ccpaApplies=!1,this.ccpaPrivacyString=null,this.stubFunctionsGenerator=e.stubFunctionsGenerator,this.scriptLoader=e.scriptLoader,this.consentUIPrompt=e.consentUIPrompt}return n(t,[{key:"init",value:function(){this.scriptLoader.load(),this.generateStubs(),this.loadVersion()}},{key:"generateStubs",value:function(){this.stubFunctionsGenerator.generate()}},{key:"loadVersion",value:function(){this.checkForVersion1(),this.checkForVersion2()}},{key:"versionHandler",value:function(e){var t=this,n=e.found,e=e.versionNumber;null===this.version&&(n?this.setVersion(e):setTimeout(function(){t.loadVersion()},500))}},{key:"checkForVersion1",value:function(){var n=this;this.browserWindow.__cmp("ping",null,function(e,t){n.versionHandler({found:t,versionNumber:1})})}},{key:"checkForVersion2",value:function(){var t=this;this.browserWindow.__tcfapi("ping",null,function(e){t.versionHandler({found:e.cmpLoaded,versionNumber:2})})}},{key:"setVersion",value:function(e){this.versionNumber=e,this.version=this.versionLoader.getVersion(e)}},{key:"checkForCCPA",value:function(e){this.version.checkForCCPA(e)}},{key:"cmpLoaded",value:function(e){if(this.logger.log("[CMP]: Check if loaded"),null===this.version)return e(!1);this.version.cmpLoaded(e)}},{key:"getConsentData",value:function(e){this.version.getConsentData(e)}},{key:"setGDPR",value:function(e){this.gdprApplies=e}},{key:"setCCPA",value:function(e){this.ccpaApplies=e}},{key:"setPrivacyString",value:function(e){this.ccpaPrivacyString=e}},{key:"setGDPRConsentPrompt",value:function(){this.version.setGDPRConsentPrompt()}},{key:"setCCPAConsentPrompt",value:function(){this.version.setCCPAConsentPrompt()}},{key:"setNonPrivacyRegionsPrompt",value:function(){this.consentUIPrompt.setup("You are outside the CCPA jurisdiction.")}}]),t}(),h=function(){function i(e,t,n){o(this,i),this.browserWindow=e,this.domSelector=t||"div[data-fuse-privacy-tool]",this.elementId=n||"fuse-privacy-tool"}return n(i,[{key:"setup",value:function(e,t){var n,i=this.browserWindow.document.querySelector(this.domSelector);i&&(t?((n=document.createElement("a")).href="javascript:void(0)",n.id=this.elementId,n.innerHTML=e,n.addEventListener("click",t),i.appendChild(n)):i.textContent=e)}}]),i}(),m=function(){function t(e){o(this,t),this.logger=e.logger,this.targetAdSlotNodeIdPrefix=e.targetAdSlotNodeIdPrefix,this.packageVersion=e.packageVersion,this.browserWindow=e.browserWindow,this.adSlotRegistry=e.adSlotRegistry,this.isInDebugMode=e.isInDebugMode,this.isDomObserverMode=e.isDomObserverMode}return n(t,[{key:"getActiveModules",value:function(){return["no-module"]}}]),t}(),y=function(){function t(e){o(this,t),this.slots={},this.logger=e.logger,this.getMatchedFuseSlot=e.getMatchedFuseSlot,this.destroySlotsFunc=e.destroySlotsFunc}return n(t,[{key:"add",value:function(e,t){e&&"string"==typeof e||this.logger.error("invalid key."),t||this.logger.error("invalid slot object passed.");e=e.toLowerCase();Array.isArray(this.slots[e])||(this.slots[e]=[]),this.slots[e].push(t)}},{key:"purgeAll",value:function(){Object.keys(this.slots).forEach(this.purge.bind(this))}},{key:"purge",value:function(e){var t;e&&"string"==typeof e&&(t=e.toLowerCase(),(e=this.getMatchedFuseSlot(t))&&(e.targeting={}),e=this.slots[t],Array.isArray(e)&&(this.destroySlotsFunc(e),this.slots[t]=[]))}},{key:"purgeByCode",value:function(e,t){var n,i;e&&"string"==typeof e&&((i=(n=this.getSlots(e)||[]).find(function(e){return e.getSlotElementId()===t}))?(this.destroySlotsFunc([i]),i=e.toLowerCase(),this.slots[i]=n.filter(function(e){return e.getSlotElementId()!==t})):this.logger.warn("no slot found for key: ".concat(e," code: ").concat(t)))}},{key:"getSlotsLength",value:function(){return Object.keys(this.slots).length}},{key:"getSlots",value:function(e){if(e&&"string"==typeof e&&Array.isArray(this.slots[e.toLowerCase()]))return this.slots[e.toLowerCase()]}},{key:"setSlotTargetingById",value:function(t,n,i){var e,o=this;t&&"string"==typeof t&&((e=this.getMatchedFuseSlot(t))&&(e.targeting||(e.targeting={}),e.targeting[n]=i),(e=o.slots[t.toLowerCase()])&&Array.isArray(e)&&e.length&&e.forEach(function(e){try{e.setTargeting(n,i)}catch(e){o.logger.error("error occurred while individually setTargeting for key - ".concat(t,"."),e.message,e.stack)}}))}}]),t}(),v=function(){function t(e){o(this,t),this.fuseDob=e.fuseDob,this.slotProblems=[]}return n(t,[{key:"getSlotProblems",value:function(){return this.slotProblems}},{key:"addSlotProblem",value:function(e){1e3<=this.slotProblems.length&&(this.slotProblems=this.slotProblems.slice(100)),this.slotProblems.push(s(s({},e),{},{time:Date.now()-this.fuseDob}))}}]),t}(),S=function(){function t(e){o(this,t),this.browserWindow=e.browserWindow}return n(t,[{key:"load",value:function(){var e=new XMLHttpRequest,t=this.browserWindow.document.location.hostname,n=this.browserWindow.document.createElement("script"),i=this.browserWindow.document.getElementsByTagName("script")[0],o=this.browserWindow.document.getElementsByTagName("head")[0]||this.browserWindow.document.documentElement,r="https://quantcast.mgr.consensu.org".concat("/choice/","PRrmquD1Ggcb1","/",t,"/choice.js");e.onreadystatechange=function(){var e;4===this.readyState&&(n.async=!0,n.type="text/javascript",200===this.status?n.src=r:(e="https://quantcast.mgr.consensu.org".concat("/choice.js"),n.src=e,r=e),i&&i.parentNode?i.parentNode.insertBefore(n,i):(console.debug("First script element not fully initialised, falling back to head-based insertion"),o.insertBefore(n,o.firstChild)))},e.open("GET",r,!0),e.send()}}]),t}(),w=function(){function t(e){o(this,t),this.logger=e.logger,this.browserWindow=e.browserWindow}return n(t,[{key:"generate",value:function(){this.createStubFunctionV1(),this.createStubFunctionV2()}},{key:"createStubFunctionV1",value:function(){var t;void 0===this.browserWindow.__cmp?(this.logger.debug("[CMP] Version 1 stub not found - generating"),t=this.browserWindow,this.browserWindow.__cmp=function(){var e=arguments;"object"!==r(t.__cmp.a)&&setTimeout(function(){t.__cmp.apply(t.__cmp,e)},400)}):this.logger.debug("[CMP] Found existing version 1 stub")}},{key:"createStubFunctionV2",value:function(){function e(){for(var e,o="__tcfapiLocator",n=[],r=s.browserWindow,t=function e(){var t,n=r.document,i=!!r.frames[o];return i?s.logger.debug("[CMP] Found existing version 2 stub"):(s.logger.debug("[CMP] Version 2 stub not found - generating"),n.body?((t=n.createElement("iframe")).style.cssText="display:none",t.name=o,n.body.appendChild(t)):setTimeout(e,5)),!i};r;){try{if(r.frames[o]){e=r;break}}catch(e){"{}"!==JSON.stringify(e)&&s.logger.error("[CONSENT]:",JSON.stringify(e))}if(r===s.browserWindow.top)break;r=r.parent}e||(s.logger.log(" !cmpFrame "),t(),r.__tcfapi=function(){var e,t=arguments;if(!t.length)return n;"setGdprApplies"===t[0]?3<t.length&&2===t[2]&&"boolean"==typeof t[3]&&(e=t[3],"function"==typeof t[2]&&t[2]("set",!0)):"ping"===t[0]?"function"==typeof t[2]&&t[2]({gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"}):n.push(t)},r.addEventListener("message",function(n){var i="string"==typeof n.data,e={};try{e=i?JSON.parse(n.data):n.data}catch(e){"{}"!==JSON.stringify(e)&&s.logger.error("[CONSENT]:",JSON.stringify(e))}var o=e.__tcfapiCall;o&&s.browserWindow.__tcfapi(o.command,o.version,function(e,t){t={__tcfapiReturn:{returnValue:e,success:t,callId:o.callId}};i&&(t=JSON.stringify(t)),n.source.postMessage(t,"*")},o.parameter)},!1))}var s=this;"undefined"!=typeof module?module.exports=e:e()}}]),t}(),k=function(){function i(e){o(this,i),this.logger=e.logger,this.browserWindow=e.browserWindow,this.consentUIPrompt=e.consentUIPrompt,this.uspTries=0,this.uspTriesLimit=3,this.createUspStub()}return n(i,[{key:"checkForCCPA",value:function(n){var i=this;this.browserWindow.__uspapi("uspPing",1,function(e,t){t&&e.mode.includes("USP")&&e.jurisdiction.includes(e.location.toUpperCase())?(i.logger.log("[CONSENT]: CCPA Region"),i.browserWindow.__uspapi("setUspDftData",1,function(e,t){i.logger.log("[CONSENT]: Setting up data for USP API",JSON.stringify(e),t),i.browserWindow.__uspapi("getUSPData",1,function(e,t){return t?void n({applies:!0,privacyString:e.uspString}):(i.logger.log("[CONSENT]: Failed retrieving USP data use default instead"),n({applies:!0,privacyString:"1---"}))})})):n({applies:!1})})}},{key:"setGDPRConsentPrompt",value:function(){var e=this;this.consentUIPrompt.setup("Privacy Settings",function(){e.browserWindow.__tcfapi("displayConsentUi",2,function(){return e.logger.log("[CONSENT]: GDPR Consent UI displayed")})})}},{key:"setCCPAConsentPrompt",value:function(){var e=this;this.consentUIPrompt.setup("Do Not Sell My Data",function(){e.browserWindow.__uspapi("displayUspUi")})}},{key:"cmpLoaded",value:function(t){var n=!1;setTimeout(function(){if(!n)return t(!1)},1e3),this.browserWindow.__tcfapi("ping",2,function(e){return n=!0,e&&e.cmpLoaded?t(!0):t(!1)})}},{key:"getConsentData",value:function(n){this.browserWindow.__tcfapi("getTCData",2,function(e,t){return t&&e?e.gdprApplies?i.CONSENT_RECEIVED_STATES.includes(e.eventStatus.toLowerCase())?n({consentReceived:!0,personalisedAdsConsent:e.purpose.consents[2]&&e.purpose.consents[3],googlePersonalisedAdsConsent:e.purpose.consents[2]&&e.purpose.consents[3],gdprApplies:e.gdprApplies}):n({consentReceived:!1,gdprApplies:e.gdprApplies}):n({consentReceived:!0,gdprApplies:!1}):n({consentReceived:!1})})}},{key:"createUspStub",value:function(){function t(){var e=arguments;r(o.__uspapi)!==t?setTimeout(function(){void 0!==o.__uspapi&&o.__uspapi.apply(o.__uspapi,e)},400):(i.warn("[CONSENT] USP is still in stub mode. Calling to ".concat(e[0]," API will be unsuccessful")),"function"==typeof e[2]&&e[2](void 0,!1))}var e,n=this,i=this.logger,o=this.browserWindow;void 0===o.__uspapi&&(o.__uspapi=t,e=setInterval(function(){n.uspTries++,o.__uspapi===t&&n.uspTries<n.uspTriesLimit?i.warn("USP is not accessible"):clearInterval(e)},300))}}]),i}();k.CONSENT_RECEIVED_STATES=["useractioncomplete","tcloaded"];var _=function(){function t(e){o(this,t),this.logger=e.logger,this.browserWindow=e.browserWindow,this.consentUIPrompt=e.consentUIPrompt}return n(t,[{key:"checkForCCPA",value:function(n){var i=this;this.browserWindow.__cmp("uspPing",null,function(e,t){t&&e&&e.location&&"ca"===e.location.toLowerCase()?(i.logger.log("[CONSENT]: CCPA Region"),i.browserWindow.__cmp("getUSPData",1,function(e,t){return t?void n({applies:!0,privacyString:e.uspString}):(i.logger.log("[CONSENT]: Failed retrieving USP data use default instead"),n({applies:!0,privacyString:"1---"}))})):n({applies:!1})})}},{key:"setGDPRConsentPrompt",value:function(){var e=this;this.consentUIPrompt.setup("Privacy Settings",function(){e.browserWindow.__cmp("displayConsentUi")})}},{key:"setCCPAConsentPrompt",value:function(){var e=this;this.consentUIPrompt.setup("Do Not Sell My Data",function(){e.browserWindow.__cmp("displayUspUi")})}},{key:"cmpLoaded",value:function(t){var n=!1;setTimeout(function(){if(!n)return t(!1)},1e3),this.browserWindow.__cmp("ping",2,function(e){return n=!0,e&&e.cmpLoaded?t(!0):t(!1)})}},{key:"getConsentData",value:function(n){var i=this;this.browserWindow.__cmp("getVendorConsents",null,function(t,e){e&&t?i.browserWindow.__cmp("getGooglePersonalization",function(e){n({consentReceived:!0,personalisedAdsConsent:t.purposeConsents&&t.purposeConsents[2]&&t.purposeConsents[3],googlePersonalisedAdsConsent:e&&e.googlePersonalizationData&&1===e.googlePersonalizationData.consentValue,gdprApplies:t.gdprApplies})}):n({consentReceived:!1,gdprApplies:t&&t.gdprApplies})})}}]),t}(),P=function(){function t(e){o(this,t),this.options=e}return n(t,[{key:"getVersion",value:function(e){var t;switch(e){case 1:t=new _(this.options);break;case 2:t=new k(this.options);break;default:t=new _(this.options)}return t}}]),t}(),E=t,A={gpt:{name:"Google Publisher Tag",url:"//securepubads.g.doubleclick.net/tag/js/",file:"gpt.js"},prebid:{name:"Prebid.org",url:E.fuse_cdn||"//cdn.publift.com/fuse/tag/",file:"prebid.js"},adblock:{name:"Criteo AdBlock",url:"//static.criteo.net/js/ld/",file:"publishertag.js"},confiant:{name:"Confiant",url:"//confiant-integrations.global.ssl.fastly.net/ZVeqITFg3t0RVj7Gh41kEbdx9DA/gpt_and_prebid/",file:"config.js"},blockthrough:{name:"Blockthrough",url:"//publift-com.videoplayerhub.com/",file:"galleryplayer.js"}},T=function(){return E.fuse_settings.publication_metadata.publication_id},C=["debug","info","warn","error","off"],O=function(){function t(e){o(this,t),this.console=e.console,this.logName=e.logName,this.fuseDob=e.fuseDob,this.logLevel=e.logLevel||"off",this.logs=[]}return n(t,[{key:"setFuseDob",value:function(e){this.fuseDob=e}},{key:"getTimestamp",value:function(){return this.fuseDob?" [".concat(Date.now()-this.fuseDob,"]"):""}},{key:"callLogMethod",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n[0]="[".concat(this.logName,"]-").concat(n[0]).concat(this.getTimestamp()),"warn"!==e&&"error"!==e||(1e3<=this.logs.length&&(this.logs=[]),this.logs.push({level:e,params:n})),"error"!==e&&C.indexOf(e)<C.indexOf(this.logLevel)||this.console[e].apply(null,n)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.callLogMethod("error",t)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.callLogMethod("warn",t)}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.callLogMethod("info",t)}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.callLogMethod("info",t)}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.callLogMethod("debug",t)}},{key:"setLogLevel",value:function(e){this.logLevel=e}},{key:"getLogLevel",value:function(){return this.logLevel}},{key:"getLogs",value:function(){return this.logs}}]),t}(),D="2.16.3",I="2",L=new(function(){function e(){o(this,e);try{this.location=this.getBrowserWindowObject().top.location}catch(e){this.location=this.getBrowserWindowObject().location}}return n(e,[{key:"getWindowLocation",value:function(){return this.location}},{key:"getPackageVersion",value:function(){return D}},{key:"getPackageMajorVersion",value:function(){return I}},{key:"getEnvironmentType",value:function(){return"undefined"!=typeof module&&module.exports?"node":"browser"}},{key:"isNodeEnvironment",value:function(){return"node"===this.getEnvironmentType()}},{key:"getBrowserWindowObject",value:function(){return window}},{key:"getPrebidGlobal",value:function(){return this.getBrowserWindowObject().fusePbjs||(this.getBrowserWindowObject().fusePbjs={que:[]}),this.getBrowserWindowObject().fusePbjs}},{key:"getQueryParam",value:function(t){return l(this.getWindowLocation().search.split(/[?&]/).filter(function(e){return""!==e}).map(function(e){return e.split("=")}).filter(function(e){return e[0]===t}),1)[0]||[]}},{key:"isInDebugMode",value:function(){return this.isNodeEnvironment()||"true"===this.getQueryParam("fuse_debug")[1]}},{key:"isDomObserverMode",value:function(){if(this.getQueryParam("fuse_dom")[1])return"true"===this.getQueryParam("fuse_dom")[1]}},{key:"getUnitsAttributesFromParams",value:function(e){var i=new RegExp("^fuse_(\\d+)_".concat(e,"(\\.\\w+|)$"),"i"),e=this.getWindowLocation().search.split(/[?&]/).filter(function(e){return""!==e}).map(function(e){return e.split("=")}).filter(function(e){return i.test(e[0])}),o=[];return e.forEach(function(e){var t=e[0].match(i),n="true"===e[1]||"false"!==e[1]&&e[1],e=t[1];void 0===o[e]&&(o[e]={}),t[2]&&(t=t[2].substring(1),o[e][t]=-1!==t.search(new RegExp("color","i"))?"#"+n:n)}),o}},{key:"getStickiesFromParams",value:function(){return this.getUnitsAttributesFromParams("sticky")}},{key:"getInterscrollersFromParams",value:function(){return this.getUnitsAttributesFromParams("interscroller")}},{key:"getLogLevel",value:function(){if(this.isInDebugMode())return"debug";if(this.getQueryParam("fuse_log_level")&&this.getQueryParam("fuse_log_level")[1]){var e=this.getQueryParam("fuse_log_level")[1];return-1!==C.indexOf(e)?e:"off"}return"off"}},{key:"getMainLogPrefix",value:function(){return"FUSE"}},{key:"getAdSlotQuerySelectorElement",value:function(){return"div"}},{key:"getTargetAdSlotNodeIdPrefix",value:function(){return"fuse-slot-"}},{key:"getTargetAdSlotNodeMainClassName",value:function(){return"fuse-slot"}},{key:"getLogger",value:function(e){return this.logger?!this.logger.fuseDob&&e&&this.logger.setFuseDob(e):this.logger=new O({console:this.getBrowserWindowObject().console,logName:this.getMainLogPrefix(),fuseDob:e,logLevel:this.getLogLevel()}),this.logger}}]),e}()),z=L.getBrowserWindowObject(),x=L.getWindowLocation(),N=function(t){return l(x.search.split(/[?&]/).filter(function(e){return""!==e}).map(function(e){return e.split("=")}).filter(function(e){return e[0]===t}),1)[0]||[]},M=function(e,t){var n;e.hasOwnProperty("url")&&((n=z.document.createElement("script")).async=!0,n.type="text/javascript","function"==typeof t&&(n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()}),n.src="https:".concat(e.url).concat(e.file),(e=z.document.getElementsByTagName("script")[0]).parentNode.insertBefore(n,e))},B=function(t,n,i){function o(){var e=Date.now()-c;e<n&&0<=e?r=setTimeout(o,n-e):(r=null,i||(l=t.apply(a,s),r||(a=s=null)))}var r,s,a,c,l;return function(){a=this,s=arguments,c=Date.now();var e=i&&!r;return r=r||setTimeout(o,n),e&&(l=t.apply(a,s),a=s=null),l}},F=L.getLogger(),R=L.getBrowserWindowObject(),U=function(e){R.addEventListener("resize",B(e||function(){F.log("resized",R.innerWidth,R.innerHeight)},500))},W=function(e){var n,i=E.fuse_breakpoints,o=e||R.innerWidth;return Object.keys(i).forEach(function(e){var t=i[e];t<o&&(!n||o<n)&&(n={size:t,name:e})}),n},G={watchForBreakpoints:function(t){var n=R.innerWidth,i=W(n).size;U(function(){n=R.innerWidth;var e=W(n).size;return e!==i?(i=e,F.log("Window resized to %spx which crossed a breakpoint: New breakpoint is %spx",n,e),t(!0)):t(!1)})},setResizeListener:U,getCurrentBreakpoint:W};function j(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function V(e){return j('\n<div class="publift-widget-container closed" style="display: '.concat("0px"===e?"none":"block",'">\n  <div class="publift-widget-background">\n  </div>\n  <div class="publift-widget-button">\n    <div></div>\n    <div></div>\n  </div>\n  <div class="publift-widget">\n  </div>\n</div>\n'))}function q(e,t,n){e.querySelector(".publift-widget").appendChild(t),e.querySelector(".publift-widget-button").addEventListener("click",function(){e.classList.contains("closed")?e.classList.remove("closed"):e.classList.add("closed")});t=document.querySelector("body");t.insertAdjacentElement("beforeend",n),t.insertAdjacentElement("beforeend",e),window.requestAnimationFrame(function(){e.classList.remove("closed")})}var H={bgColor:"#EFEFEF",bgOpacity:.7,allowClose:!1,buttonColor:"#313131",barColor:"#EFEFEF",borderWidth:"0px",zIndex:2147483647},Q={bgColor:"#EFEFEF",allowClose:!1,buttonColor:"#313131",barColor:"#FFFFFF",borderWidth:"5px",zIndex:2147483647},J=function(e,t){t=s(s({},H),t||{});q(V(t.height),e,j('\n<style id="publift-widget-styles">\n.publift-widget-container {\n  z-index: '.concat(t.zIndex,";\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  height: ").concat(t.height,";\n  transition: height .3s linear;\n}\n\n.publift-widget-button {\n  width: 40px;\n  border-radius: 2px 2px 0px 0px;\n  margin-left: 2px;\n  height: 20px;\n  background-color: ").concat(t.barColor,";\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  display: ").concat(t.allowClose?"flex":"none",";\n}\n\n.publift-widget-button :first-child, .publift-widget-button :last-child  {\n  background-color: ").concat(t.buttonColor,";\n  width: 13px;\n  height: 3px;\n  border-radius:2px;\n  transition: transform .2s;\n}\n\n.publift-widget-button :first-child {\n  transform: rotate(30deg) translateX(2px);\n}\n.publift-widget-button :last-child {\n  transform: rotate(-30deg) translateX(-2px);\n}\n\n.publift-widget {\n  width:100%;\n  height: ").concat(t.height,";\n  display: flex;\n  justify-content: center;\n  border-top: ").concat(t.borderWidth," solid ").concat(t.barColor,";\n}\n\n.publift-widget-background {\n  position: absolute;\n  width:100%;\n  height: ").concat(t.height,";\n  background-color: ").concat(t.bgColor,";\n  opacity: ").concat(t.bgOpacity,";\n  bottom:0px;\n  z-index: -1;\n}\n\n.publift-widget-container.closed {\n  min-height: 0px;\n  height:0px !important;\n}\n.publift-widget-container.closed .publift-widget-background {\n  display: none;\n}\n\n</style>\n")))},Y=function(e,t){t=s(s({},Q),t||{});q(V(t.height),e,j('\n<style id="publift-widget-styles">\n.publift-widget-container {\n  z-index: '.concat(t.zIndex,";\n  position: fixed;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  transition: transform .3s linear, height .3s linear;\n  background-color: ").concat(t.barColor,";\n}\n.publift-widget-button {\n  width: 40px;\n  border-radius: 2px 2px 0px 0px;\n  margin-left: 2px;\n  height: 20px;\n  background-color: ").concat(t.barColor,";\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: -20px;\n  display: ").concat(t.allowClose?"flex":"none",";\n}\n\n.publift-widget-button :first-child, .publift-widget-button :last-child  {\n  background-color: ").concat(t.buttonColor,";\n  width: 13px;\n  height: 3px;\n  border-radius:2px;\n  transition: transform .2s;\n}\n\n.publift-widget-button :first-child {\n  transform: rotate(30deg) translateX(2px);\n}\n.publift-widget-button :last-child {\n  transform: rotate(-30deg) translateX(-2px);\n}\n\n.publift-widget {\n  display: flex;\n  justify-content: center;\n  border: ").concat(t.borderWidth," solid ").concat(t.barColor,";\n}\n\n.publift-widget-container.closed {\n  transform: translateY(120%) TranslateX(-50%);\n}\n</style>\n")))},X=function(e,t){return s(s({},(t=t||{}).compact?Q:H),{},{compact:!1},t)},Z=function(e,t){var n=G.getCurrentBreakpoint().name,e=e.sizeMapping,n=e[n]?e[n].map(function(e){return e[1]}):[];return n.length?"".concat(Math.max.apply(Math,d(n))+Number(t.borderWidth.substring(0,t.borderWidth.length-2))*(t.compact?2:1),"px"):"0px"};function K(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function ee(e){var t,n=Date.now();we.push((c(t={},e,!0),c(t,"ts",n),c(t,"load_time_ms",n-Se.getFuseDob()),t))}var te,ne=function(e){return s({selector:".adBreak",showBanner:!1,height:"100vh",zIndex:1e7,top:"auto"},e||{})},ie=function(e){var t=G.getCurrentBreakpoint().name,e=e.sizeMapping,t=e[t]?e[t].map(function(e){return e[1]}):[];return t.length?"".concat(Math.max.apply(Math,d(t)),"px"):"0px"},oe=function(){function t(e){o(this,t),this.logger=e.logger,this.footerStickiesParams=e.footerStickiesParams||[],this.interscrollersParams=e.interscrollersParams||[]}return n(t,[{key:"stickySlots",value:function(){var t=this;return this.accountSettings.fuse_slots.filter(function(e){return e.attributes&&(e.attributes.sticky||t.footerStickiesParams[e.id])})}},{key:"renderStickySlots",value:function(){var e,t=this.stickySlots();this.logger.info("[WIDGETS] Render Stickies: ".concat(t.length)),t.length&&(e=t[0],1<t.length&&this.logger.warn("[WIDGETS] Render ONLY first sticky cause of widget limitations: ".concat(e.id)),this.renderSticky(e))}},{key:"renderInterscrollerSlots",value:function(){var e,t=this.scrollSlots();this.logger.info("[WIDGETS] Render Interscrollers: ".concat(t.length)),t.length&&(e=t[0],1<t.length&&this.logger.warn("[WIDGETS] Render ONLY first Interscroller cause of widget limitations: ".concat(e.id)),this.renderInterscroller(e))}},{key:"renderSticky",value:function(e){!function(e,t,n){e=j(e),t=X(n,t);t.height=Z(n,t),(t.compact?Y:J)(e,t)}('<div data-fuse="'.concat(e.id,'"></div>'),s(s({},e.stickyAttributes),this.footerStickiesParams[e.id]),e)}},{key:"renderInterscroller",value:function(e){var t,n,i,o;t='<div data-fuse="'.concat(e.id,'"></div>'),n=s(s({},e.interscrollerAttributes),this.interscrollersParams[e.id]),i=e,o=this.logger,e=ne(n),n=ie(i),i=K('\n    <div class="publift-scroll-unit-root">\n      '.concat(e.showBanner?'<div class="publift-scroll-container-message banner_top">Advertisement</div>':"",'\n      <div class="publift-scroll-container">\n        <div class="publift-scroll-clip">\n          <div class="publift-scroll-widget">').concat(t,"</div>\n        </div>\n      </div>\n    </div>\n  ")),t=K('\n  <style id="publift-scroll-styles">\n  .publift-scroll-container {\n    width: 100vw;\n    min-height: '.concat(e.height,";\n\n    z-index: ").concat(e.zIndex,";\n    position: relative;\n  }\n\n  .publift-scroll-container-message {\n    background-color: black;\n    color: white;\n    padding: .5em;\n    text-align: center;\n    font-family: sans-serif;\n  }\n\n  .publift-scroll-clip {\n    position: absolute;\n    left: 0px;\n    width: 100%;\n    height: 100%;\n    margin: 0px;\n    padding: 0px;\n    clip-path: inset(0px);\n    clip: rect(0px, auto, auto, 0px);\n    min-height: ").concat(e.height,"\n  }\n\n  .publift-scroll-widget {\n    position: fixed;\n    top: ").concat(e.top,";\n    left: 0px;\n    width: 100%;\n    height: 100%;\n    margin: 0px;\n    padding: 0px;\n    bottom: 0px;\n    transform: translateZ(0px);\n  }\n  .publift-scroll-unit-root {\n    display: ").concat("0px"===n?"none":"block",";\n  }\n\n  </style>\n  ")),(n=document.querySelector("body"))&&(n.insertAdjacentElement("beforeend",t),(t=document.querySelector(e.selector))?(t.appendChild(i),i.style.marginLeft="-".concat(i.getBoundingClientRect().x,"px")):o.warn("[WIDGETS] Interscroller insertionPoint with selector not found: ".concat(e.selector)))}},{key:"scrollSlots",value:function(){var t=this;return this.accountSettings.fuse_slots.filter(function(e){return e.attributes&&(e.attributes.interscroller||t.interscrollersParams[e.id])})}},{key:"render",value:function(e){if(e)this.accountSettings=e;else if(!e&&!this.isInited)return void this.logger.err("[WIDGETS] no accountSettings was provided");this.renderStickySlots(),this.renderInterscrollerSlots()}},{key:"cleanup",value:function(){document.querySelector("#publift-widget-styles")&&document.querySelector("#publift-widget-styles").remove(),document.querySelector(".publift-widget-container")&&document.querySelector(".publift-widget-container").remove(),document.querySelector("#publift-scroll-styles")&&document.querySelector("#publift-scroll-styles").remove(),document.querySelector(".publift-scroll-unit-root")&&document.querySelector(".publift-scroll-unit-root").remove()}},{key:"onBreakpointChange",value:function(){var e=this.stickySlots(),t=this.scrollSlots();this.logger.info("[WIDGETS] onBreakpointChange Stickies: ".concat(e.length," Scrolls: ").concat(t.length));var n,i,o=e[0];e.length&&(1<e.length&&this.logger.warn("[WIDGETS] onBreakpointChange ONLY first sticky cause of widget limitations: ".concat(o.id)),n=s(s({},(r=o).stickyAttributes),this.footerStickiesParams[o.id]),i=X(r,n),e=document.querySelector(".publift-widget-container"),o=document.querySelector(".publift-widget-background"),(n=document.querySelector(".publift-widget"))&&document.querySelector(".publift-widget").children[0]&&(r=Z(r,i),e.style.height=r,e.style.display="0px"===r?"none":"block",i.compact||(o.style.height=r),n.style.height=r));var r=t[0];t.length&&(1<t.length&&this.logger.warn("[WIDGETS] onBreakpointChange ONLY first scrolls cause of widget limitations: ".concat(r.id)),r=ie(t=r),(t=document.querySelector(".publift-scroll-unit-root"))&&(t.style.display="0px"===r?"none":"block"))}}]),t}(),re=function(e,t,n,i,o){var r=e.top,s=e.bottom,a=e.left,c=e.right,l=e.width,e=e.height*o,o=l*o;return 0<=r+e+i&&0<=a+o&&s-e-i<=n&&c-o<=t},se=L.getAdSlotQuerySelectorElement(),ae=L.getTargetAdSlotNodeMainClassName(),ce=L.getBrowserWindowObject(),le=JSON.parse(JSON.stringify(E.fuse_slots)),de=function(){return ce.performance.timing.navigationStart},ue=L.getLogger(de()),ge=function(){return le},fe=function(e){return!0===e?0:e},pe=function(e,t){t=t.name;return e.hasOwnProperty("customLazy")&&e.customLazy.hasOwnProperty(t)&&!1!==e.customLazy[t]?e.customLazy[t]:e.attributes.lazy},be=function(e,t,n){if(!e)return!1;var i=e.getBoundingClientRect(),o=ce.document.hidden,r=ce.innerWidth||ce.document.documentElement.clientWidth,e=ce.innerHeight||ce.document.documentElement.clientHeight,t=t?t/100:1,n=fe(n),t=re(i,r,e,n,t);return!o&&t},he=function(e){if(!e)return ue.error("missing parameter fuseSlot");e.matched=e.matched||0,e.matched+=1},me=function(t){if(!t)return ue.error("missing parameter fuseSlotID");if("string"!=typeof t)return ue.error("fuseSlotId should be of type string");var n=RegExp("".concat(t.toLowerCase(),"$"));return l(le.filter(function(e){return e.id===t||n.test(e.slot.toLowerCase())}),1)[0]||!1},ye=function(e){return e.filter(function(e){return!ve(e)})},ve=function(e){return Array.isArray(e)?"fluid"===e[0]:"fluid"===e},Se={buildFuseSlot:function(e,t){var n;return ue.log("[SLOTS]: Building the fuse slot for ".concat(e.code," "),new Date-de()),t.setAttribute("data-fuse-code","".concat(e.code)),t.setAttribute("data-fuse-slot","".concat(e.slot)),ce.document.getElementById(e.code)||((n=ce.document.createElement("div")).setAttribute("id","".concat(e.code)),n.className=ae,t.appendChild(n)),t},checkInView:be,checkLazyFalsy:function(e,t,n){return!!t.attributes.hasOwnProperty("lazy")&&(!1!==t.attributes.lazy&&!be(e,50,pe(t,n)))},clearFuseSkins:function(){for(var e=ce.document.querySelectorAll("div.fuse-custom-skin"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])},filterFluidSizes:ye,isFluid:ve,formatSizes:function(e){return e.map(function(e){return ve(e)&&Array.isArray(e)?e[0]:e})},getCurrentSizeMapSizes:function(t){var e=G.getCurrentBreakpoint().name,n=l(ge().filter(function(e){return e.id===t})||[],1)[0];if(!n)return ue.warn("[SLOTS]: getCurrentSizeMapSizes(): Could not find fuseSlot with id ".concat(t)),[];if(n.sizeMapping&&n.sizeMapping[e]){var i=ye(n.sizeMapping[e]);return 0===i.length&&ue.debug("[SLOTS]: No non-fluid sizes available for ".concat(t," at current breakpoint: '").concat(e,"'")),i}return ue.warn('[SLOTS]: Fuse slot "'.concat(t,'" has no sizemap, sizeless prebid units may act strangely.')),ye(n.sizes||[])},getFuseDob:de,getElapsedTime:function(){return new Date-de()},getFuseQueue:function(){return ce.fusetag.que||[]},getFuseUnitByCode:function(e){var t=ce.document.querySelectorAll("".concat(se,'[data-fuse-code="').concat(e,'"]'));return 1<t.length&&ue.warn("There should be only one div with the data-fuse-code of ".concat(e)),t[0]},getFuseUnitById:function(e){e=ce.document.querySelectorAll("".concat(se,'[data-fuse="').concat(e,'"]'));return e[e.length-1]},getHeaderBiddingOptions:function(e){if(e.prebid&&e.prebid.enabled&&e.prebid.breakpoint_options){var t=G.getCurrentBreakpoint().name,t=e.prebid.breakpoint_options[t];if(t)return t}return{enabled:0<e.headerbidding,sendAllBids:e&&e.prebid&&!0===e.prebid.sendAllBids,timeout:e.headerbidding}},getMatchedFuseSlot:me,getSlots:ge,getTime:function(){return te},getUnits:function(){return Array.prototype.slice.call(ce.document.querySelectorAll("".concat(se,"[data-fuse]")))},incrementMatchedFuseSlot:he,lazyAttribute:fe,lazyDeviceToggle:pe,matchNodeToFuseSlotObject:function(e){if(!e)return ue.error("missing parameter fuseSlotNode");var t=e.getAttribute("data-fuse"),n=me(t);return n||ue.warn("[SLOTS]: There is no FuseSlot set up in the account matching the id ".concat(t)),n&&(he(n),t=e.getAttribute("data-targeting-key"),e=e.getAttribute("data-targeting-value"),t&&t.length&&e&&e.length&&(n.targeting||(n.targeting={}),n.targeting[t]=e)),n},resetSlots:function(){return le=JSON.parse(JSON.stringify(E.fuse_slots))},setNewTime:function(e){return te=e},isEdgeBrowser:function(){return/[E]dge/.test(ce.navigator.userAgent)}},we=[],ke=[];ee("init_start");var _e,Pe={setStateStatus:ee,addAdEvent:function(e,t){var n=Date.now();ke.push({adEvent:e,requestID:t,ts:n,event_time_ms:n-Se.getFuseDob()})},states:we,events:ke},Ee=A.gpt,Ae=L.getLogger(Se.getFuseDob()),Te=L.getBrowserWindowObject(),Ce=L.getWindowLocation(),Oe=function(){var e=Ce.host;return e.substring(e.length-40,e.length)},De=function(){var e=Ce.pathname;return e.substring(e.length-40,e.length)},Ie=function(){var e=Ce.search;return e.substring(e.length-40,e.length)},Le=function(){for(var e=[],t=Ce.pathname.split("/"),n=0;n<t.length;n+=1)t[n].length&&-1===t[n].indexOf(".")&&e.push(t[n]);return e},ze=function(){var t=Ce.host,n=Ce.pathname,i="false";return E.fuse_blocked_url&&E.fuse_blocked_url.forEach(function(e){-1<e.indexOf(t+n)&&(i="true")}),i},xe=function(e){if(_e&&_e.cmd)return _e.cmd.push(e);Ae.error("googletag or googletag.cmd not exists")},Ne=function(t){if(_e){if(t){var e=_e.pubads().getSlots();if(Array.isArray(t)){var n,i,o=e.filter(function(e){return 0<=t.indexOf(e.getSlotElementId())});return o.length!==t.length&&(n=e.map(function(e){return e.getSlotElementId()}),i=t.filter(function(e){return-1===n.indexOf(e)}),Ae.warn("Could not find a GPT slot for all fuse slots.\n        Missing Slots=".concat(JSON.stringify(i),",\n        All GPT Slots: ").concat(JSON.stringify(n)))),o}o=e.filter(function(e){return e.getSlotElementId()===t});return o||(e=e.map(function(e){return e.getSlotElementId()}),Ae.warn("Could not find a GPT slot for ".concat(t,". GPT Slots=").concat(JSON.stringify(e),")"))),o}Ae.error("Called getGPTSlot() without a fuseSlotCode")}else Ae.error("Called getGPTSlot(".concat(t,") but googletag not defined"))};var Me=function(e,i){var o;return i.sizeMapping&&0!==Object.keys(i.sizeMapping).length&&(o=_e.sizeMapping(),Object.keys(i.sizeMapping).forEach(function(e){var t=E.fuse_breakpoints[e],n=i.sizeMapping[e];void 0!==t&&(Ae.log("[EVENT] Setting breakpoint for slot ".concat(i.slot," for size ").concat(e," with breakpoint ").concat(t," and mapping ").concat(n)),o.addSize([t,0],Se.formatSizes(n)))}),e.defineSizeMapping(o.build())),e},Be=function(t,n){return n.targeting&&Object.keys(n.targeting).length&&Object.keys(n.targeting).forEach(function(e){t.setTargeting(e,n.targeting[e])}),t},Fe=function(e,t){xe(function(){Ae.log("[GPT]: Setting targeting for [key: ".concat(e,", value: ").concat(t,"]")),_e.pubads().setTargeting(e,t)})},Re=function(){Fe("fuse_profanity",ze()),Fe("fuse_site",Oe()),Fe("fuse_path",De()),Fe("fuse_query",Ie()),Fe("fuse_category",Le()),Fe("fuse_industry",E.fuse_industry);var e="false";Te.screen.width>=E.fuse_settings.inskinWidth&&(e="true"),Fe("inskin_yes",e),Fe("fuse_uuid",E.fuse_uuid),Fe("fuse_publication_id",T().toString())},Ue={setDefaultTargetingAsync:Re,loadGPTLibrary:function(e){Te.googletag&&Te.googletag._loadStarted_?Ae.log("[LOAD]: 3. GPT v".concat(_e.getVersion()," is already on the page, skip loading another copy")):M(Ee,function(){Ae.log("[INIT]: GPT ".concat(Te.googletag&&Te.googletag._loadStarted_?"v".concat(_e.getVersion()," is loaded"):"not loaded")),e()})},createGPTCall:function(e){var t=_e.defineSlot(e.slot,e.sizes,e.code),n=Math.ceil(100*Math.random());return t?(t=Me(t,e),t=Be(t,e),n=10<n?"optimized":n%10==0?"benchmark":"exploration".concat(n%10),!1!==E.fuse_settings.adomik&&t.setTargeting("publift_mv_testing",n),t.addService(_e.pubads())):Ae.warn("createGPTCall(): googletag.defineSlot() returned null"),t},createGPTObj:function(){return _e=Te.googletag||(Te.googletag={cmd:[]})},setTargetingAsync:Fe,pushToGPTQue:xe,makeGPTCall:function(e){var t;if(_e)return!e&&0<_e.pubads().getSlots().length?(t=_e.pubads().getSlots()[_e.pubads().getSlots().length-1].getSlotElementId(),Ae.error("[BIDS]: GPT called with no fuse slot")):e?t=e.code:(t=null,Ae.error("[BIDS]: GPT called with no fuse slot")),Ae.log("[BIDS]: Initialising DFP call at",new Date-(Se.getTime()||Se.getFuseDob())),_e.display(t);Ae.warn("[BIDS]: GPT call skipped because googletag not defined")},refreshUnitsAsync:function(o,r){xe(function(){var e,t,n=o?Ne(o):null,i=o&&o.length?JSON.stringify(n.map(function(e){return e.getSlotElementId()})):"all units";!0===Se.isEdgeBrowser()?(Ae.debug("[GC] will trigger GC for iFrames in Edge browser"),e=$("div[data-fuse] iframe"),t=$.Deferred(),e.one("load",function(){try{$(this.contentWindow).empty(),Ae.log("[GC]: cleaned iFrame contentWindow")}catch(e){Ae.error("[GC]: error in cleaning iFrame contentWindow => ".concat(e))}}),e.attr("src","about:blank"),setTimeout(t.resolve,5),t.promise().then(function(){try{CollectGarbage()}catch(e){Ae.error("[GC]: error in CollectGarbage => ".concat(e))}Ae.log("[GPT]: Refreshing ".concat(i)),Pe.addAdEvent("gpt_pubads_refresh_".concat(i),r),_e.pubads().refresh(n)})):(Ae.log("[GPT]: Refreshing ".concat(i)),Pe.addAdEvent("gpt_pubads_refresh_".concat(i),r),_e.pubads().refresh(n))})},getGPTSlot:Ne,setTagSettings:function(){_e.pubads().disableInitialLoad(),_e.pubads().collapseEmptyDivs(!0),_e.pubads().setCentering(!0),_e.pubads().enableSingleRequest(),Re()},eventSlotRenderEnded:function(t){_e.pubads().addEventListener("slotRenderEnded",function(e){t({hasCreative:!e.isEmpty,slotId:e.slot.getSlotElementId()})})},eventSlotImpressionViewable:function(){_e.pubads().addEventListener("impressionViewable",function(e){Ae.log("[EVENT]: AD_IMPRESSION_VIEW for ".concat(e.slot.getSlotElementId()),new Date-(Se.getTime()||Se.getFuseDob()))})},getFuseCategories:Le,getFuseHost:Oe,getFusePath:De,getFuseQuery:Ie,enableServices:function(){Te.googletag.enableServices()},disablePersonalisedAds:function(){Te.googletag.pubads().disableInitialLoad(),Te.googletag.pubads().setRequestNonPersonalizedAds(1)},setInterstitialSlot:function(e){if(e){var t=(e.interstitialAttributes||{minPageViews:0}).minPageViews;if(t){var n=window.sessionStorage,i=Number(n.getItem("fuse-page-views")||0);if(i<t)return void n.setItem("fuse-page-views",i+1);n.setItem("fuse-page-views",0)}e=_e.defineOutOfPageSlot(e.slot,_e.enums.OutOfPageFormat.INTERSTITIAL);e?(e.addService(_e.pubads()),_e.pubads().disableInitialLoad(),_e.enableServices(),_e.display(e),_e.pubads().refresh([e])):Ae.warn("setInterstitialSlot(): googletag.defineOutOfPageSlot returned undefined")}},destroySlots:function(e){_e.destroySlots(e)}},We=function(){function e(){o(this,e)}return n(e,[{key:"code",value:function(e){return"1---"}}]),e}(),Ge=new(function(){function e(){o(this,e)}return n(e,[{key:"getCcpaPrivacyStringCoder",value:function(){return new We}},{key:"getUamPubID",value:function(){return t.fuse_settings.amazonUam&&t.fuse_settings.amazonUam.enabled?t.fuse_settings.amazonUam.pubID:""}},{key:"getUamAdServer",value:function(){return"googletag"}},{key:"getSco",value:function(){return t.sco}}]),e}()),je=new(function(){function e(){o(this,e)}return n(e,[{key:"getPackageVersion",value:function(){return L.getPackageVersion()}},{key:"getPackageMajorVersion",value:function(){return L.getPackageMajorVersion()}},{key:"isInDebugMode",value:function(){return L.isInDebugMode()}},{key:"isDomObserverMode",value:function(){return L.isDomObserverMode()}},{key:"getAdSlotQuerySelectorElement",value:function(){return L.getAdSlotQuerySelectorElement()}},{key:"getTargetAdSlotNodeIdPrefix",value:function(){return L.getTargetAdSlotNodeIdPrefix()}},{key:"getBrowserWindowObject",value:function(){return L.getBrowserWindowObject()}},{key:"getTargetAdSlotNodeMainClassName",value:function(){return L.getTargetAdSlotNodeMainClassName()}},{key:"getPrebidGlobal",value:function(){return L.getPrebidGlobal()}},{key:"getLogger",value:function(){return L.getLogger(Se.getFuseDob())}},{key:"getGptSlotRegistry",value:function(){var t=this;return new y({logger:this.getLogger(),getMatchedFuseSlot:function(e){return Se.getMatchedFuseSlot(e)},pushToGoogleTagQueueFunc:function(e){return e},destroySlotsFunc:function(e){return Ue.pushToGPTQue(function(){t.getBrowserWindowObject().googletag.destroySlots(e)})}})}},{key:"getFuseTag",value:function(){return new m({logger:this.getLogger(),targetAdSlotNodeIdPrefix:this.getTargetAdSlotNodeIdPrefix(),packageVersion:this.getPackageVersion(),browserWindow:this.getBrowserWindowObject(),adSlotRegistry:this.getGptSlotRegistry(),isInDebugMode:this.isInDebugMode(),isDomObserverMode:this.isDomObserverMode()})}},{key:"getUamPubID",value:function(){return Ge.getUamPubID()}},{key:"getUamAdServer",value:function(){return Ge.getUamAdServer()}},{key:"getSco",value:function(){return Ge.getSco()}},{key:"getAmazonUam",value:function(){return new p({pubID:this.getUamPubID(),adServer:this.getUamAdServer(),logger:this.getLogger(),browserWindow:this.getBrowserWindowObject(),sco:this.getSco()})}},{key:"getCmpVersionLoader",value:function(){return new P({logger:this.getLogger(),browserWindow:this.getBrowserWindowObject(),consentUIPrompt:new h(this.getBrowserWindowObject())})}},{key:"getStubFunctionsGenerator",value:function(){return new w({logger:this.getLogger(),browserWindow:this.getBrowserWindowObject()})}},{key:"getCmpScriptLoader",value:function(){return new S({browserWindow:this.getBrowserWindowObject()})}},{key:"getConsentManger",value:function(){return new b({browserWindow:this.getBrowserWindowObject(),logger:this.getLogger(),versionLoader:this.getCmpVersionLoader(),stubFunctionsGenerator:this.getStubFunctionsGenerator(),scriptLoader:this.getCmpScriptLoader(),consentUIPrompt:new h(this.getBrowserWindowObject())})}},{key:"getProblemReporter",value:function(){return this.problemReporter||(this.problemReporter=new v({fuseDob:Se.getFuseDob()}),this.problemReporter)}},{key:"getWidgetsRenderer",value:function(){return this.widgetsRenderer||(this.widgetsRenderer=new oe({logger:this.getLogger(),footerStickiesParams:L.getStickiesFromParams(),interscrollersParams:L.getInterscrollersFromParams()}),this.widgetsRenderer)}}]),e}()),Ve=je.getLogger(),qe=je.getBrowserWindowObject(),He=A.adblock,Qe=function(e){var t;qe.Criteo?(t=e,qe.Criteo.events.push(function(){Ve.log("[SLOTS]: Adblock slots ".concat(t.containerid," set up")),qe.Criteo.DisplayAcceptableAdIfAdblocked(t),qe.document.getElementById(t.containerid).style.height=t.height,qe.document.getElementById(t.containerid).style.display="none"})):Ve.warn("You need to declare the global Criteo Object first")},Je={loadAdBlocklLibrary:function(e){return M(He,function(){Ve.log("[LOAD]: 3. Adblock script loaded."),Ve.log("[TIME]: time in ms to load Adblock script",new Date-Se.getFuseDob()),e&&e()})},createAdBlockObj:function(){return qe.Criteo||(qe.Criteo={events:[]})},buildAdBlockSlots:function(e,t){var n,i,o;0<t.querySelectorAll('[id^="crt"]').length||e.attributes&&e.attributes.adblock&&(n=qe.document.createElement("DIV"),i=e.sizes&&0<e.sizes.length?"".concat(e.sizes[0][1],"px"):"100%",o={zoneid:Number(e.attributes.adblock),containerid:"crt-".concat(e.code),overrideZoneFloor:!1,height:i,callbacksuccess:function(e){Ve.log("[SLOTS]: Adblock slots ".concat(o.containerid," loaded")),Ve.log("[TIME]: time in ms it took Adblock Slot ".concat(o.containerid," to load"),new Date-Se.getFuseDob()),e.target.parentNode.style.display="block"}},n.id=o.containerid,n.className="fuse-adblock",t.appendChild(n),Qe(o))}},Ye=je.getLogger();var Xe={enable:function(e){M(A.blockthrough,function(){Ye.log("[LOAD]: 0. Blockthrough tag loaded"),Ye.log("[TIME]: time in ms it took Blockthrough tag to load",new Date-Se.getFuseDob()),e&&e()})}},$e=je.getLogger(),Ze=je.getBrowserWindowObject();function Ke(e){var t=e/.835;return gt.log("[BIDS]: Adjusting IX bid from Net to Gross from ".concat(e," to ").concat(t)),t}var et={enable:function(e){Ze.confiant=Ze.confiant||{},M(A.confiant,function(){$e.log("[LOAD]: 0. Confiant tag loaded"),$e.log("[TIME]: time in ms it took Confiant tag to load",new Date-Se.getFuseDob()),e&&e()})}},tt=je.getLogger(),nt={},it=0,ot=0,rt=function(e){nt[e]?(nt[e].disconnect(),delete nt[e],tt.log("[DOM-OBSERVER] observer stopped for ".concat(e))):tt.warn("[DOM-OBSERVER] observer not found for ".concat(e))},st={addNodeDeletionObserver:function(n,i){var e,o=n.code;nt[o]?tt.warn("[DOM-OBSERVER] node for ".concat(o," was already observed")):(tt.log("[DOM-OBSERVER] new observer added ".concat(o)),(e=new MutationObserver(function(e){tt.debug("[DOM-OBSERVER] Start for ".concat(o," Events:").concat(it," Time: ").concat(ot));var t=Date.now();it++,e.forEach(function(e){"childList"===e.type&&0<e.removedNodes.length&&e.removedNodes.forEach(function(e){(e.id===o||e.querySelector&&e.querySelector("#".concat(o)))&&(rt(o),tt.log("[DOM-OBSERVER] found deleted node ".concat(o)),i(n))})});t=Date.now()-t;ot+=t,tt.debug("[DOM-OBSERVER] End for ".concat(o," Took:").concat(t," Events:").concat(it," Time: ").concat(ot))})).observe(document,{attributes:!1,childList:!0,subtree:!0}),nt[o]=e),tt.log("[DOM-OBSERVER] observer set to track deletion of ".concat(o))},stopObserver:rt,getObservers:function(){return nt}},at=function(){function i(e,t){var n=this;o(this,i),this.log=t,this.registry={},e.forEach(function(e){n.registry[e]=[]})}return n(i,[{key:"on",value:function(e,t){return!!this.registry[e]&&(this.registry[e].push(t),!0)}},{key:"off",value:function(e,n){return!!this.registry[e]&&(this.registry[e].forEach(function(e,t){e===n&&(i=t)}),!(!i&&0!==i)&&(this.registry[e].splice(i,1),!0));var i}},{key:"once",value:function(t,n){var i=this;return i.on(t,function e(){n.apply(null,Array.prototype.slice.call(arguments)),i.off(t,e)})}},{key:"emit",value:function(e){if(!this.registry[e])return!1;var t=Array.prototype.slice.call(arguments);t.shift(),this.log("[EVENT] ".concat(e," triggered with ").concat(this.registry[e].length," in the registry")),this.registry[e].forEach(function(e){e.apply(null,t)})}}]),i}(),ct=je.getLogger(),lt=je.getBrowserWindowObject(),dt={capture:!0,passive:!0},ut={addLazyListener:function(n,i,o){lt.addEventListener("scroll",function e(){var t=G.getCurrentBreakpoint();Se.checkInView(n,null,Se.lazyDeviceToggle(i,t))&&(Se.lazyDeviceToggle(i,t)||0===Se.lazyDeviceToggle(i,t))&&(ct.debug("[SLOT] Lazy listener callback triggered for ".concat(i.code)),o()||ct.warn("[SLOT] Lazy listener failed to load ".concat(i.code,". It will not be re-attempted.")),lt.removeEventListener("scroll",e,dt),ct.debug("[SLOT] Removed scroll listener for ".concat(i.code)))},dt)}},gt=je.getLogger(),ft=je.getPackageMajorVersion(),pt=je.getBrowserWindowObject(),bt=je.getPrebidGlobal(),ht=A.prebid,mt={setConsentManagement:function(e){"function"!=typeof pt.__tcfapi&&"function"!=typeof pt.__cmp&&!(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).cmp||(e.consentManagement={gdpr:{cmpApi:"iab",timeout:1e4},usp:{cmpApi:"iab",timeout:100}},"function"==typeof pt.__tcfapi?e.consentManagement.gdpr.defaultGdprScope=!0:e.consentManagement.gdpr.allowAuctionWithoutConsent=!1,gt.log("[CONSENT]: prebid consent management module in place"))},setUserSync:function(e){e.userSync={filterSettings:{iframe:{bidders:"*",filter:"include"}}}},setPriceGranularity:function(e){e.priceGranularity={buckets:[{max:3,increment:.01,precision:2},{max:10,increment:.1,precision:2},{max:50,increment:1,precision:2},{max:100,increment:10,precision:2}]}},setSizeConfig:function(t,n){var i;n&&n.fuse_settings&&n.fuse_settings.responsive&&(i=null,t.sizeConfig=[],Object.keys(n.fuse_breakpoints).forEach(function(e){t.sizeConfig.push({mediaQuery:"(min-width:".concat(n.fuse_breakpoints[e],"px)").concat(i?" and (max-width: ".concat(i-1,"px)"):""),sizesSupported:n.supported_sizes[e],labels:[e]}),i=n.fuse_breakpoints[e]}))},setBidderSettings:function(e){e.bidderSettings={ix:{bidCpmAdjustment:Ke}}},setScoSettings:function(e,t){t&&(e.schain={validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:t.asi,sid:t.sellerId,hp:1}]}},e.bidderSettings.schain=e.schain)}},yt=function(e){e.prebid_analytics&&e.prebid_analytics.length&&e.prebid_analytics.forEach(function(e,t){0!==t&&gt.warn("\n          [ANALYTICS]: Having more than one analytics provider active may affect page performance.\n        "),bt.enableAnalytics(e),gt.log("[ANALYTICS]: Analytics enabled for ".concat(e.provider))})},vt=function(e){var t={};return mt.setPriceGranularity(t),t.enableSendAllBids=e&&!0===e.sendAllBids,mt.setConsentManagement(t,E),mt.setSizeConfig(t,E),mt.setUserSync(t),mt.setBidderSettings(t),mt.setScoSettings(t,E.sco),t},St={loadPrebidLibrary:function(e){if(!bt||!bt.libLoaded){var t=s({},ht);return"true"===N("local_prebid")[1]?(gt.warn("[LOAD]: local version of prebid in use"),t.url="./"):t.url+="".concat(ft,"/").concat(E.fuse_id,"/"),N("originId")[1]&&(t.file+="?originId="+N("originId")[1]),M(t,function(){gt.log("[LOAD]: 3. Prebid ".concat(bt&&bt.libLoaded?"".concat(bt.version," is loaded and ready"):"not loaded")),gt.log("[TIME]: time in ms it took Prebid to load",new Date-Se.getFuseDob()),e(),pt.pbjs&&pt.pbjs.libLoaded?pt.pbjs.renderAd||(pt.pbjs.renderAd=bt.renderAd):pt.pbjs=bt})}gt.log("[LOAD]: 3. Prebid ".concat(bt.version," is already loaded skip loading it again"))},pushToPrebidQue:function(e){bt&&bt.que?bt.que.push(e):gt.error("[PREBID]: No prebid que available")},setPrebidAdUnits:function(e){var t=Se.getCurrentSizeMapSizes(e.id);gt.log("[BIDS]: Setting Prebid ad units for ".concat(e.code," with sizes ").concat(JSON.stringify(t))),bt.addAdUnits({code:e.code,mediaTypes:{banner:{sizes:t}},bids:e.bids})},getPrebidDefaultConfig:vt,setPrebidConfig:function(e){return e=e||vt(),gt.log("[BIDS]: Setting Prebid Config"),bt.setConfig(e),yt(E),e}};function wt(e){return"object"===r(e)&&null!==e}var kt=function(){function t(e){o(this,t),this.browserWindow=e.browserWindow,this.userIdentityGlobal=e.userIdentityGlobal,this.placementId=e.placementId}return n(t,[{key:"setup",value:function(){var e,t=this,n=this.browserWindow[this.userIdentityGlobal];n&&wt(n)&&(n.email||n.phoneNumber||n.emailHashes)?(e={placementID:this.placementId},n.email?e.email=n.email:n.phoneNumber?e.phoneNumber=n.phoneNumber:e.emailHashes=n.emailHashes):e={placementID:this.placementId,storageType:"localStorage",detectionType:"scrapeAndUrl",cssSelectors:["input[type=text]","input[type=email]"],detectionSubject:"all",urlParameter:"user_id",logging:"debug"};var i=document.createElement("script");i.src="https://ats.rlcdn.com/ats.js",i.onload=function(){t.browserWindow.ats.start(e)};n=this.browserWindow.document.getElementsByTagName("script")[0];n.parentNode.insertBefore(i,n)}},{key:"configPrebid",value:function(e){return e.userSync||(e.userSync={}),e.userSync.userIds=[{name:"identityLink",params:{pid:this.placementId},storage:{type:"cookie",name:"idl_env",expires:7}}],e}}]),t}(),_t=function(e){if(void 0!==e&&wt(e))return Object.keys(e).length},Pt=je.getLogger(),Et=je.getTargetAdSlotNodeIdPrefix(),At=je.getPackageVersion(),Tt=je.isInDebugMode(),Ct=je.getPrebidGlobal(),Ot=je.getGptSlotRegistry(),Dt=je.getBrowserWindowObject(),It=je.getAmazonUam(),Lt=je.getConsentManger(),zt=je.isDomObserverMode(),xt=je.getProblemReporter(),Nt=je.getWidgetsRenderer(),Mt=t,Bt=Mt.fuse_settings;Bt.pageTargeting=[],void 0!==zt&&(Bt.useDomObserver=zt);var Ft=Dt.fusetag||(Dt.fusetag={que:[]});Ft.fuseUUID=Mt.fuse_uuid,Ft.initialised=Ft.initialised||!1,Tt&&(Ft.version=At);var Rt={},Ut={},Wt=[],Gt={},jt={},Vt={},qt="onTagInitialised",Ht="onSlotsInitialised",Qt="onSlotCreated",Jt=new at([qt,Ht,Qt],function(){return Pt.log.apply(Pt,arguments)});Ft.edgeHtmlMaxAdsRefreshLimit=Bt.edgeHtmlMaxAdsRefreshLimit||60;function Yt(){return Rt}function Xt(){return Object.assign({},Mt)}function $t(e,t){Pt.log("[EVENT]: loadSlotById(".concat(e,", ").concat(t,")")),Ft.initialised?pn(e,t):Ft.onTagInitialised(function(){pn(e,t)})}var Zt={},Kt=function(e){delete Zt[e]},en=function e(){var t=Math.random().toString(16).slice(2);return Object.prototype.hasOwnProperty.call(Zt,t)?e():t},tn=function(e){Zt[e]={aps:!1,prebid:!1}},nn=function(e,t){e=mn(e,function(e){Pt.info("[BIDS][".concat(t,"]: Skipped AdServer request because the slot was deleted ").concat(e))});Ue.refreshUnitsAsync(e,t),Kt(t)},on=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];Zt[t]?(e=mn(e,function(e){Pt.info("[BIDS]: Skip Bidder back for deleted unit ".concat(e))}),Bt.prebid.enabled&&Bt.amazonUam.enabled?n?Zt[t].aps&&Zt[t].prebid?(Pt.info("[BIDS][".concat(t,"]: Starting auction")),nn(e,t)):Pt.debug("[BIDS][".concat(t,"]: Still waiting for bids. Received: ").concat(JSON.stringify(Zt[t]))):(Pt.info("[BIDS][".concat(t,"]: Timeout reached with missing responses, starting auction.\n        Received: ").concat(JSON.stringify(Zt[t]))),nn(e,t)):nn(e,t)):n&&Pt.debug("[BIDS][".concat(t,"] Received ").concat(n," bid after adserver request already sent"))},rn=function(){return Ut},sn=function(){Object.keys(jt).forEach(function(e){return clearInterval(jt[e])}),jt={}},an=["main","experiment"],cn=function(e,t,n){e+=500;Pt.log("[BIDS][".concat(n,"]: Set bidders timeout ").concat(e)),window.setTimeout(function(){on(t,n)},e)},ln=function(e){var n=en();tn(n);var t=e||Object.keys(Ut),i=Se.getHeaderBiddingOptions(Bt);Pt.log("[REFRESH][".concat(n,"]: Refreshing slots: ").concat(JSON.stringify(t)));var o=mn(t,function(e){Pt.info("[REFRESH]: Skip Refreshing slots for deleted unit ".concat(e))});if(!(i&&i.enabled||Bt.amazonUam.enabled))return Pt.debug("[GPT][".concat(n,"]: Refreshing without Prebid or UAM")),Se.clearFuseSkins(),Ue.refreshUnitsAsync(o,n),void Kt(n);St&&i.enabled&&St.pushToPrebidQue(function(){Ct.adUnits?(Pt.debug("[PREBID][".concat(n,"]: Updating pbGlobal sizemap")),Ct.adUnits=Ct.adUnits.map(function(e){var t=Ut[e.code];if(!t)return hn(e.code)&&Pt.info("[BIDS]: Prebid Event fired for deleted unit ".concat(e.code)),Pt.debug("[PREBID][".concat(n,"]: Could not find fuseslot for ").concat(e.code)),e;t=Se.getCurrentSizeMapSizes(t.id);return e.mediaTypes&&e.mediaTypes.banner&&(e.mediaTypes.banner.sizes=t),e}),Pe.addAdEvent("prebid_request_all",n),Pt.debug("[PREBID][".concat(n,"]: Requesting bids: ").concat(JSON.stringify(Ct.adUnits))),Ct.requestBids({adUnitCodes:o,timeout:i.timeout,bidsBackHandler:function(e){Pt.debug("[PREBID][".concat(n,"]: Prebid bid response: "),JSON.stringify(e)),Pe.addAdEvent("prebid_response_all",n),Ct.setTargetingForGPTAsync(),Se.clearFuseSkins(),Zt[n].prebid=!0,on(o,n,"prebid")}})):Pt.error("[PREBID][".concat(n,"]: prebidGlobal not ready"))}),Bt.amazonUam.enabled&&Ut&&((e=Object.values(Ut).filter(function(e){return 0<=o.indexOf(e.code)}).map(function(e){return{slotID:e.code,slotName:e.slot,sizes:Se.getCurrentSizeMapSizes(e.id)}}).filter(function(e){return e.sizes.length})).length?(Pe.addAdEvent("uam_request_all",n),Pt.debug("[UAM][".concat(n,"]: UAM slots "),JSON.stringify(e)),It.makeBids(e,function(e){Pt.debug("[UAM][".concat(n,"]: UAM bid response for all "),JSON.stringify(e)),Pe.addAdEvent("uam_response_all",n),Zt[n].aps=!0,on(o,n,"aps")})):Pt.debug("[UAM][".concat(n,"]: Skipped UAM bid because no slots found"))),cn(i.timeout,t,n)},dn=function(o){if(o){var r=en();tn(r),Pt.log("[REFRESH][".concat(r,"]: Refreshing ").concat(o));var e,n,s=Se.getHeaderBiddingOptions(Bt),a=Ut[o];return a?s&&s.enabled||Bt.amazonUam.enabled?(St&&s.enabled&&(Pt.debug("[REFRESH][".concat(r,"]: Pushed refresh of ").concat(o," to prebid queue")),St.pushToPrebidQue(function(){var e,t,n;Ct&&Ct.adUnits&&(void 0!==(e=yn(o))&&(t=Ct.adUnits[e],Pt.debug("[REFRESH][".concat(r,"]: Pushed refresh ").concat(JSON.stringify(t))),t&&(n=Se.getCurrentSizeMapSizes(a.id),t.mediaTypes&&t.mediaTypes.banner&&(t.mediaTypes.banner.sizes=n),Ct.adUnits[e]=t))),Pt.debug("[REFRESH][".concat(r,"]: Triggered prebid bid request for ").concat(o)),Pe.addAdEvent("prebid_request_".concat(o),r);var i=new Date;Ct.requestBids({timeout:s.timeout,adUnitCodes:[o],bidsBackHandler:function(e){var t,n;t=o,n=new Date-i.getTime(),Pt.log("[REFRESH][".concat(r,"]: Prebid response for ").concat(t," in ").concat(n,"ms: "),JSON.stringify(e)),hn(t)?Pt.info("[BIDS]: Prebid bid response fired for deleted unit ".concat(t)):(Pe.addAdEvent("prebid_response_".concat(t),r),Ct.setTargetingForGPTAsync([t]),Zt[r].prebid=!0,on([t],r,"prebid"))}})})),Bt.amazonUam.enabled&&((e=Se.getCurrentSizeMapSizes(a.id)).length?(e=[{slotID:a.code,slotName:a.slot,sizes:e}],Pe.addAdEvent("uam_request_".concat(a.code),r),Pt.debug("[REFRESH][".concat(r,"]: Triggered UAM bid request for ").concat(o)),n=new Date,It.makeBids(e,function(e){var t=new Date-n.getTime();Pt.log("[REFRESH][".concat(r,"]: UAM bid response for ").concat(a.code," in ").concat(t,"ms: "),JSON.stringify(e)),Pe.addAdEvent("uam_response_".concat(a.code),r),Zt[r].aps=!0,on([a.code],r,"aps")})):Pt.debug("[REFRESH][".concat(r,"]: Skipped UAM bid because no sizes available"))),void cn(s.timeout,[o],r)):(hn(o)?Pt.log("[REFRESH]: Skip refresh for deleted unit ".concat(o)):(Pe.addAdEvent("request_creative_".concat(o)),Ue.refreshUnitsAsync([o],r)),void Kt(r)):(Pt.warn("[REFRESH][".concat(r,"]: Skip refresh because slot for ").concat(o," not found")),hn(o)&&Pt.log("[REFRESH]: Skip refresh for deleted unit ".concat(o)),void Kt(r))}},un=function(t,e){jt[t.code]&&clearInterval(jt[t.code]),jt[t.code]=setInterval(function(){var e=G.getCurrentBreakpoint();Se.isEdgeBrowser()&&(Vt[t.code]=Vt[t.code]||0,Vt[t.code]>Ft.edgeHtmlMaxAdsRefreshLimit||!Dt.document.hasFocus())?Pt.log((Vt[t.code]>Ft.edgeHtmlMaxAdsRefreshLimit?'will skip refreshing ad(code: "'.concat(t.code,'") as it reached Edge browser ads refresh limit of ').concat(Ft.edgeHtmlMaxAdsRefreshLimit," at the moment - "):"will skip refreshing ad as browser page/tab is NOT active at the moment - ").concat((new Date).toISOString(),".")):t.element&&Se.checkInView(Dt.document.getElementById(t.code)||t.element,50,Se.lazyDeviceToggle(t,e))&&(Se.isEdgeBrowser()&&(Vt[t.code]+=1),dn(t.code))},1e3*e)},gn=function(e){e.attributes.refresh?(Pt.log("[LOAD]: Setting custom refresh time of ".concat(e.attributes.refresh," seconds for ").concat(e.code," at: "),new Date-Se.getFuseDob()),un(e,e.attributes.refresh)):0===e.attributes.refresh?Pt.log("[LOAD]: No refresh timer set for ".concat(e.code," at: "),new Date-Se.getFuseDob()):Bt.refresh&&0<Bt.refresh?(Pt.log("[LOAD]: Setting global refresh time of ".concat(Bt.refresh," seconds for ").concat(e.code," at: "),new Date-Se.getFuseDob()),un(e,Bt.refresh)):Pt.log("[LOAD]: No refresh timer exists in account settings.")},fn=function(e){Pt.log("[LOAD]: Loading ".concat(e," at ").concat(new Date-(Se.getTime()||Se.getFuseDob())));var t=Se.getFuseUnitByCode(e);if(!t)return Pt.warn("[LOAD] Unable to load ".concat(e," because that node could not be found in the DOM")),!1;t=t.getAttribute("data-fuse-code");t||Pt.warn("[LOAD]: No fuseCode for fuse-slot-code of ".concat(e,", this usually means there was an error with initialisation"));var n=rn()[t];return hn(n.code)?(Pt.log("[LOAD]: Skip for deleted unit ".concat(n.code)),!1):n?(Ue.pushToGPTQue(function(){if(!hn(n.code)){var e=Ue.createGPTCall(n);return Ot.add(n.id,e),e}Pt.log("[LOAD]: Skip createGPTCall for deleted unit ".concat(n.code))}),St&&0<Bt.headerbidding&&St.pushToPrebidQue(function(){hn(n.code)?Pt.log("[LOAD]: Skip setPrebidAdUnits for deleted unit ".concat(n.code)):St.setPrebidAdUnits(n)}),Ue.pushToGPTQue(function(){hn(n.code)?Pt.log("[LOAD]: Skip makeGPTCall for deleted unit ".concat(n.code)):(Pe.addAdEvent("call_gpt_".concat(n.code)),Ue.makeGPTCall(n))}),dn(n.code),gn(n),Pt.log("[LOAD] Successfully loaded ".concat(e)),wn("loadFuseSlotByCode"),!0):(Pt.error("[LOAD]: Unable to load ".concat(e," because the slot could not be found")),!1)},pn=function(e,t){var n=t?Dt.document.getElementById(t):Se.getFuseUnitById(e);if(!n)return Pt.warn("[SLOTS]: Could not find div with data-fuse attribute of ".concat(e));t=n.getAttribute("data-fuse-code");if(t&&Rt[t]===n)return Pt.log("[SLOTS]: ".concat(e," has already with been bootstrapped and showing ad with ad slot ID ").concat(t));var i=JSON.parse(JSON.stringify(Se.matchNodeToFuseSlotObject(n)));i&&(i.code="".concat(Et).concat(i.id,"-").concat(i.matched),Se.buildFuseSlot(i,n),Je&&i.attributes&&i.attributes.adblock&&Je.buildAdBlockSlots(i,n),Ut[i.code]=i,Ut[i.code].element=n,Rt[i.code]=n,Bt.useDomObserver&&(st.addNodeDeletionObserver(i,vn),Sn(i),wn("_loadSlotById_addNodeDeletionObserver")),Ue.pushToGPTQue(function(){if(!hn(i.code)){var e=Ue.createGPTCall(i);return Ot.add(i.id,e),e}Pt.log("[LOAD-BY-ID]: Skip createGPTCall for deleted unit ".concat(i.code))}),St&&0<Bt.headerbidding&&St.pushToPrebidQue(function(){hn(i.code)?Pt.log("[LOAD-BY-ID]: Skip setPrebidAdUnits for deleted unit ".concat(i.code)):St.setPrebidAdUnits(i)}),Ue.pushToGPTQue(function(){Pe.addAdEvent("call_gpt_".concat(i.code)),hn(i.code)?Pt.log("[LOAD-BY-ID]: Skip makeGPTCall for deleted unit ".concat(i.code)):Ue.makeGPTCall(i)}),gn(i),Jt.emit(Qt,i),dn(i.code),wn("_loadSlotById"))},bn=function(){Pt.log("[EVENT]: resetSlots()"),Se.setNewTime(new Date),Bt.useDomObserver?Pt.log("[EVENT]: resetSlots() using DomObserver"):(Object.keys(Ut).forEach(function(e){hn(e)&&Pt.log("[EVENT]: resetSlots() unit already deleted ".concat(e)),Wt.push(e)}),Ot.purgeAll(),Rt={},Ut={},Gt={},sn(),St&&0<Bt.headerbidding&&Ct&&Ct.adUnits&&Ct.removeAdUnit(),Se.clearFuseSkins()),Object.keys(Bt.pageTargeting).forEach(function(e){Ue.pushToGPTQue(function(){Dt.googletag.pubads().clearTargeting(e.key)})}),wn("resetSlots")},hn=function(e){return-1!==Wt.indexOf(e)},mn=function(e,n){return e.filter(function(e){var t=!hn(e);return!t&&n&&n(e),t})},yn=function(t){return Ct&&Ct.adUnits?Ct.adUnits.findIndex(function(e){return e.code===t}):void 0},vn=function(e){var t=e.code,n=e.id;Pt.log("[DOM-OBSERVER] run node deletion callback for ".concat(t)),hn(t)?Pt.log("[DOM-OBSERVER] unit already deleted ".concat(t)):(Wt.push(t),delete Ut[t],Ot.purgeByCode(n,t),Ft.disableRefresh(t),delete Gt[t],delete Rt[t],Sn(e),wn("fuseNodeDeletionCallback"),Ct&&Ct.adUnits&&Ct.adUnits.length&&Ct.removeAdUnit(t))},Sn=function(e){var t=e.code,n=e.id,i=Ot.getSlots(n),e=yn(t);Pt.debug("[RESOURCES] Resources for fuseSlot ".concat(t,"\n    gptSlots[").concat(n,"]:").concat(i?i.length:void 0,"\n    prebidGlobal.adUnits[").concat(t,"]: ").concat(void 0!==e?Ct.adUnits[e]:void 0,"\n    refreshData[").concat(t,"]: ").concat(jt[t],"\n    refreshCounts[").concat(t,"]: ").concat(Vt[t]))},wn=function(e){Pt.debug("[RESOURCES][".concat(e||"manual","] All Resources\n    gptSlots:").concat(Ot.getSlotsLength(),"\n    FUSESLOTS:").concat(_t(Ut),"\n    PROCESSED_FUSE_CODE:").concat(_t(Gt),"\n    DELETED_FUSE_CODES:").concat(Wt.length,"\n    FUSEUNITS:").concat(_t(Rt),"\n    prebidGlobal.adUnits: ").concat(Ct&&Ct.adUnits?Ct.adUnits.length:void 0,"\n    refreshData:").concat(_t(jt),"\n    refreshCounts:").concat(_t(Vt),"\n    requestManager:").concat(_t(Zt)))},kn=function(i){var e=Se.getUnits(),o=[],r=[];e.forEach(function(e){var t,n=e.getAttribute("data-fuse-code");n&&i?Pt.log("[SLOTS] Skip ".concat(n," because it was processed at time ").concat(Gt[n])):(n&&Pt.warn("[SLOTS] Processing ".concat(n," again. This is likely to be an error, but preserved for backwards compatibility")),(t=Se.matchNodeToFuseSlotObject(e))&&((t=JSON.parse(JSON.stringify(t))).code="".concat(Et).concat(t.id,"-").concat(t.matched),Pt.log("[SLOTS] Processing fuseId ".concat(t.id," as ").concat(t.code)),Se.buildFuseSlot(t,e),Je&&t.attributes&&t.attributes.adblock&&Je.buildAdBlockSlots(t,e),Ut[t.code]=t,Ut[t.code].element=e,Rt[t.code]=e,r.push(t.code),o.push(t),Bt.useDomObserver&&(st.addNodeDeletionObserver(t,vn),Sn(t),wn("addNodeDeletionObserver")),n=G.getCurrentBreakpoint(),Se.checkLazyFalsy(e,t,n)?(Pt.log("[SLOTS]: Adding lazy listener for ".concat(t.code)),ut.addLazyListener(e,t,function(){return fn(t.code)})):(Ue.pushToGPTQue(function(){if(!hn(t.code)){var e=Ue.createGPTCall(t);return Ot.add(t.id,e),e}Pt.log("[SLOTS]: Skip createGPTCall for deleted unit ".concat(t.code))}),St&&0<Bt.headerbidding&&t.bids&&0<t.bids.length&&St.pushToPrebidQue(function(){hn(t.code)?Pt.log("[SLOTS]: Skip setPrebidAdUnits for deleted unit ".concat(t.code)):St.setPrebidAdUnits(t)}),Ue.pushToGPTQue(function(){Pe.addAdEvent("call_gpt_".concat(t.code)),hn(t.code)?Pt.log("[SLOTS]: Skip makeGPTCall for deleted unit ".concat(t.code)):Ue.makeGPTCall(t)}),gn(t)),Pt.log("[SLOTS] Processed ".concat(t.code)),Gt[t.code]=Se.getElapsedTime()))}),Jt.emit(Ht,o),Ue.pushToGPTQue(function(){Ue.setDefaultTargetingAsync(),Bt.pageTargeting.forEach(function(e){Ue.setTargetingAsync(e.key,e.value)})}),r.length?ln(r):Pt.debug("[SLOTS]: Refresh skipped because there's nothing to do"),wn("_processSlots")},_n=function(){Pt.log("[EVENT]: loadSlots() started"),bn(),Pe.setStateStatus("process_slots_start"),kn(!1),Pe.setStateStatus("process_slots_finish")};Ft.getAdSlotsById=function(e){if(e&&("string"==typeof e||"number"==typeof e))return Ot.getSlots("".concat(e))},Ft.setSlotTargetingById=function(e,t,n){Pt.log("[EVENT]: setSlotTargetingById(".concat(e,", ").concat(t,", ").concat(n,") started")),!e||"string"!=typeof e&&"number"!=typeof e||Ot.setSlotTargetingById(e,t,n)},Ft.onSlotRenderEnded=function(t){Ue.pushToGPTQue(function(){return Ue.eventSlotRenderEnded(function(e){t(e)})})},Ft.onTagInitialised=function(e){Jt.once(qt,e)},Ft.onSlotsInitialised=function(e){Jt.once(Ht,e)},Ft.onSlotInitialised=function(e){Jt.once(Qt,e)},Ft.disableRefresh=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];e&&jt[e]?(Pt.log("[REFRESH]: Disabling refresh for ".concat(e)),clearInterval(jt[e])):(Pt.log("[REFRESH]: Disabling refresh for all units"),sn())},Ft.setTargeting=function(n,e){var i=-1;Bt.pageTargeting.forEach(function(e,t){-1===i&&e.key===n&&(i=t)}),-1<i?(Bt.pageTargeting[i].value=e,Pt.log("[LOAD]: Updating custom targeting for [key: ".concat(n,", value: ").concat(e,"]"))):(Bt.pageTargeting.push({key:n,value:e}),Pt.log("[LOAD]: Adding custom targeting for [key: ".concat(n,", value: ").concat(e,"]"))),Ft.initialised&&Ue.setTargetingAsync(n,e)},Ft.getTargeting=function(){return Bt.pageTargeting},Ft.que.push=function(e){if("function"==typeof e)try{e.call()}catch(e){Pt.error("Error processing command :",e.message,e.stack)}else Pt.error("Commands written into fusetag.que.push must be wrapped in a function")};var Pn=function(){Ft.loaded||(Ft.loaded=!0,Se.getFuseQueue().forEach(function(e){if(Pt.log("[LOAD]: executing functions pushed to Fuse Queue"),"function"==typeof e)try{e.call(),e.called=!0}catch(e){Pt.error("Error processing command :",e.message,e.stack)}else Pt.error("Commands written into fusetag.que.push must be wrapped in a function")}))},En=function(){Ft.initialised?Pt.log("[LOAD]: Fuse tag has been initialised, skip the remaining of the process"):(Bt.disableWidgetsRenderer||Nt.render(Mt),Pe.setStateStatus("fuse_queue_start"),Pn(),Pe.setStateStatus("fuse_queue_finish"),Bt.disableAutoLoadSlots?Pt.log("[LOAD]: disableAutoLoadSlots SET - NOT calling loadSlots"):(Pt.log("[LOAD]: disableAutoLoadSlots NOT SET - calling loadSlots"),_n()),Pe.setStateStatus("on_tag_init_start"),Jt.emit(qt),Pe.setStateStatus("on_tag_init_finish"),Ft.initialised=!0)};function An(){return Dt.googletag&&Dt.googletag.apiReady}function Tn(){return"loading"!==Dt.document.readyState}function Cn(e){var t=e.disablePersonalisedAds,e=e.forceDisablePrebid;Pt.log("[INIT]: disablePersonalisedAds is ".concat(t?"on":"off")),Pt.log("[INIT]: forceDisablePrebid is ".concat(e?"on":"off")),t&&Ue.pushToGPTQue(function(){Ue.disablePersonalisedAds()}),e&&(Bt.headerbidding=0,Bt.prebid&&Bt.prebid.breakpoint_options&&Object.keys(Bt.prebid.breakpoint_options).forEach(function(e){Bt.prebid.breakpoint_options[e].enabled=!1})),St&&0<Bt.headerbidding&&(Pe.setStateStatus("prebid_load_start"),St.loadPrebidLibrary(function(){Pe.setStateStatus("prebid_load_finish")}),St.pushToPrebidQue(function(){var e=Bt.prebid&&!0===Bt.prebid.sendAllBids,e=St.getPrebidDefaultConfig({sendAllBids:e});Bt.identity.enabled&&Bt.identity.module&&(e=Bt.identity.module.configPrebid(e)),St.setPrebidConfig(e)}),Ue.pushToGPTQue(function(){Dt.googletag.pubads().disableInitialLoad()}),Pt.log("[PREBID]: Enabled with ".concat(Bt.headerbidding,"ms timeout"))),Bt.amazonUam.enabled&&(It.load(),Lt.gdprApplies?It.applyGDPR():Lt.ccpaApplies&&It.applyCCPA(Lt.ccpaPrivacyString),It.init(Se.getFuseDob()),Pe.setStateStatus("amazon")),Je&&0<Bt.adblock&&(Je.createAdBlockObj(),Pe.setStateStatus("adblock_load_start"),Je.loadAdBlocklLibrary(function(){Pe.setStateStatus("adblock_load_finish")}),Pt.log("[ADBLOCK]: Enabled"));var n,i,o,r,s=Mt.fuse_slots.find(function(e){return e.attributes&&!0===e.attributes.interstitial});Ue.pushToGPTQue(function(){Ue.setTagSettings(),Ue.eventSlotRenderEnded(function(e){var t;e.hasCreative?Pt.info("[BIDS]: Adserver responded with creative for ".concat(e.slotId)):Pt.error("[BIDS]: Adserver responded without creative for ".concat(e.slotId)),e.hasCreative&&Pe.addAdEvent("ad_render_".concat(e.slotId)),Ut[e.slotId]?(Ut[e.slotId].hasCreative=e.hasCreative,e.hasCreative||(t={fuseSlotId:Ut[e.slotId].id,fuseSlotCode:Ut[e.slotId].code,errorType:"MISSING_CREATIVE"},xt.addSlotProblem(t))):hn(e.slotId)?Pt.log("[BIDS]: Slot Render Ended Event fired for deleted unit ".concat(e.slotId)):Pt.debug("[BIDS]: Slot Render Ended Event fired for non fuse units: ".concat(e.slotId))}),Ue.eventSlotImpressionViewable(Ut),Ue.enableServices(),Ue.setInterstitialSlot(s)}),G&&Bt.responsive&&G.watchForBreakpoints(function(e){e&&(ln(),Nt.onBreakpointChange())}),Bt.quickstart&&Bt.disableAutoLoadSlots?En():Bt.quickstart&&!Bt.disableAutoLoadSlots?(Pe.setStateStatus("docready_wait_start"),Tn()?(Pe.setStateStatus("docready_wait_finish"),En()):n=setInterval(function(){Tn()&&(Pe.setStateStatus("docready_wait_finish"),clearInterval(n),En())},25)):(o=i=!1,Pe.setStateStatus("gpt_apiready_wait_start"),Pe.setStateStatus("docready_wait_start"),Tn()&&An()?(Pe.setStateStatus("docready_wait_finish"),Pe.setStateStatus("gpt_apiready_wait_finish"),En()):r=setInterval(function(){!i&&Tn()&&(i=!0,Pe.setStateStatus("docready_wait_finish")),!o&&An()&&(o=!0,Pe.setStateStatus("gpt_apiready_wait_finish")),i&&o&&(clearInterval(r),En())},25))}function On(){return 1243===Mt.fuse_id||2561===Mt.fuse_id||Bt.strict_cmp}Ft.init=Cn,Ft.setDefaultTargeting=Ue.setDefaultTargetingAsync,Ft.getRefreshIntervals=function(){return JSON.parse(JSON.stringify(jt))},Ft.getSlots=rn,Ft.getSettings=Xt,Ft.getUnits=Yt,Ft.loadSlots=_n,Ft.processNewSlots=function(){Pt.log("[EVENT]: processNewSlots() started"),kn(!0),Pt.debug("[EVENT]: processNewSlots() completed")},Ft.loadSlotById=$t,Ft.refreshSlots=ln,Ft.refreshSlotByCode=dn,Ft.resetSlots=bn,Ft.enableExperiment=function(e){var t;an.includes(e)?(t=new Date((new Date).getTime()+2592e6),t="fuse_originId=".concat(e,";expires=").concat(t.toUTCString(),";path=/;"),Dt.document.cookie=t,Pt.log("Experiment type [".concat(e,"] set. Expires in ").concat(30," days."))):Pt.error("Invalid experiment type. Valid types: ".concat(an))},Ft.getCookie=function(){var e=Dt.document.cookie.match("(^|;)\\s*fuse_originId\\s*=\\s*([^;]+)")||"";return e=Array.isArray(e)?e.pop():e},Ft.getCurrentBreakpoint=function(){return G.getCurrentBreakpoint()},Ft.setLogLevel=function(e){Pt.setLogLevel(e)},Ft.getLogLevel=function(){return Pt.getLogLevel()},Ft.getLogs=function(){return Pt.getLogs()},Ft.getObservers=st.getObservers,Ft.logResources=wn,Ft.getSlotProblems=function(){return xt.getSlotProblems()},Ft.states=Pe.states,Ft.events=Pe.events,Ft.widgetsRenderer=Nt,Ft.getAdSlotsByFuseId=Ft.getAdSlotsById,Ft.getFuseSlots=rn,Ft.getFuseSettings=Xt,Ft.getFuseUnits=Yt,Ft.loadFuseSlots=_n,Ft.resetFuseSlots=bn,Ft.loadFuseSlotById=$t,Ft.setSlotTargetingByFuseId=Ft.setSlotTargetingById,Ft.loaded&&Pt.warn("[LOAD]: Fuse Tag was loaded more than once."),Bt.confiant&&(Pe.setStateStatus("confiant_load_start"),et.enable(function(){Pe.setStateStatus("confiant_load_finish")})),Bt.cmp&&(1243===Mt.fuse_id||2561===Mt.fuse_id||Bt.disable_quantcast?(Lt.generateStubs(),Lt.loadVersion()):(Lt.init(),Pe.setStateStatus("cmp_load_start"))),Bt.blockthrough&&(Pe.setStateStatus("blockthrough_load_start"),Xe.enable(function(){Pe.setStateStatus("blockthrough_load_finish")})),Bt.identity&&Bt.identity.enabled&&(Bt.identity.module||(Bt.identity.module=new kt({browserWindow:Dt,userIdentityGlobal:Bt.identity.userIdentityGlobal,placementId:Bt.identity.placementId}),Bt.identity.module.setup()));try{Pt.log("[INIT][onFuseLoadCallback] Start"),e(Dt),Pt.debug("[INIT][onFuseLoadCallback] Finish")}catch(e){Pt.error("[INIT][onFuseLoadCallback] Encountered error during evaluation",e)}function Dn(){Pe.setStateStatus("gpt_load_start"),Ue.createGPTObj(),Ue.loadGPTLibrary(function(){Pe.setStateStatus("gpt_load_finish")}),Ue.pushToGPTQue(function(){Pt.debug("First fuse queued GPT event executed"),Pe.setStateStatus("gpt_queue_start")})}var In,Ln,zn;Bt.wait_cmp_ready&&"function"==typeof __tcfapi?(In=!1,Pt.log("[LOAD]: 3. Wait for CMP to load before start loading GPT"),setTimeout(function(){In||(Pt.log("[LOAD]: 3. CMP has not been loaded after 3s ignore and continue"),Dn())},3e3),Dt.__tcfapi("addEventListener",2,function(e){In||(Pt.log("[LOAD]: 3. CMP has been loaded, going to load GPT script"),Dn(),In=!0),e&&e.listenerId&&Dt.__tcfapi("addEventListener",2,function(){},e.listenerId)})):Dn(),Bt.skip_auto_init?Pt.log("[INIT]: auto init is off skip Fuse init"):Bt.cmp?(Pt.log("[CMP]: Found IAB CMP, checking for status before initiating"),Ln=1,zn=setInterval(function(){Lt.cmpLoaded(function(e){return e?(Pt.log("[CMP]: Loaded version ".concat(Lt.versionNumber,", checking for consent")),Pe.setStateStatus("cmp_loaded"),clearInterval(zn),void Lt.getConsentData(function e(t){var n=t.consentReceived,i=t.personalisedAdsConsent,o=t.googlePersonalisedAdsConsent,t=t.gdprApplies;if(!1===t){Pt.log("[CMP]: Not in GDPR region");var r=!1,s=!1;return setTimeout(function(){if(!s)return Pt.warn("[CMP]: USP API is not responding, continue as if not in CCPA region"),Lt.setNonPrivacyRegionsPrompt(),Cn({disablePersonalisedAds:r,forceDisablePrebid:r})},1e3),void Lt.checkForCCPA(function(e){return s=!0,e.applies?(Lt.setCCPAConsentPrompt(),Lt.setCCPA(e.applies),Lt.setPrivacyString(e.privacyString),r="Y"===e.privacyString[2].toUpperCase()):(Pt.log("[CMP]: Not in CCPA region, continue with personalisation"),Lt.setNonPrivacyRegionsPrompt()),Cn({disablePersonalisedAds:r,forceDisablePrebid:r})})}if(n||!(Ln<200))return Lt.setGDPR(t),Lt.setGDPRConsentPrompt(),200===Ln&&(Pe.setStateStatus("cmp_determination_timeout"),On()?(Pt.info("[CMP]: Determination not received and timeout reached, disabling personalisation"),Cn({disablePersonalisedAds:!0,forceDisablePrebid:!0})):(Pt.info("[CMP]: Determination not received and timeout reached, continuing with personalisation"),Cn({disablePersonalisedAds:!1,forceDisablePrebid:!1}))),Pe.setStateStatus("cmp_determination_received"),Pt.log("[CMP]: ".concat(o?"[Y]":"[N]"," Google Personalised Ads")),Pt.log("[CMP]: ".concat(i?"[Y]":"[N]"," Vendors Personalised Ads")),Cn({disablePersonalisedAds:!o,forceDisablePrebid:!i});setTimeout(function(){Ln+=1,Lt.getConsentData(e)},100)})):Ln<200?void(Ln+=1):(clearInterval(zn),void(On()?(Pt.info("[CMP]: Not loaded and timeout reached, disabling personalisation"),Cn({disablePersonalisedAds:!0,forceDisablePrebid:!0})):(Pt.info("[CMP]: Not loaded and timeout reached, continuing with personalisation"),Cn({disablePersonalisedAds:!1,forceDisablePrebid:!1}))))})},100)):(Pt.log("[CMP]: No CMP found, continue to init Fuse"),Cn(!1)),je.getBrowserWindowObject()});
